import{b as he,p as R,i as be,x as ye,I as H,E as Fe,H as xe,J as Ce,_ as we}from"./index.fe83b6cf.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               */import{c as ke,d as De,j as Be,r as i,o as Ee,w as Ae,aK as f,b4 as Me,F as h,G as E,aU as n,aT as s,H as u,b2 as A,aH as C,aX as x,u as r,aW as b,aI as Se,c9 as Ie,aY as Ve,n as L,aP as o,aO as ze,bm as Pe,b6 as Te,cm as Ue,c8 as Ne,bx as $e,cg as Re,bf as He,bT as Le,bD as Oe,bE as Ye,c7 as je}from"./arco.31164f47.js";import{A as Ge,g as Ke,d as Je}from"./AddMenu.bb005a0e.js";import{s as We}from"./dayjs.37b46cef.js";import Xe from"./AddForm.7c2c1253.js";import{t as qe}from"./index.7089f47a.js";import{s as Qe}from"./data.d324d80a.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import"./common.c09afe5e.js";const Ze=ke(()=>[{title:"\u6392\u5E8F",dataIndex:"weigh",width:80,align:"center"},{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"keyname",slotName:"title",width:150,align:"center"},{title:"\u5B57\u5178\u9879\u503C",dataIndex:"keyvalue",width:150,align:"center"},{title:"\u5B57\u5178\u63CF\u8FF0",dataIndex:"des",slotName:"des",width:180,align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",width:100,align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",width:160,align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:100,align:"center"}]),et={class:"container"},tt={class:"flexbox"},at={class:"menu flexcolumn"},nt={class:"btn"},st={class:"tablebox"},ut={class:"titlebox"},ot={class:"text"},lt={class:"icon"},it={class:"flex-page content"},dt={class:"custom-full-table"},ct={class:"table-toolbar flex flex-between"},rt={class:"left"},pt={class:"right"},mt={class:"table-container"},_t={key:1,style:{"font-size":"12px"},class:"success"},gt={name:"dictionary"},vt=De({...gt,setup(ft){const M=he(),[O,{openModal:S}]=R(),[Y,{openModal:j}]=R(),p=Be({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:G,setLoading:y}=be(!0),w=i([]),m=i([]),I=i([]),V=i(!1),z=i("large"),P=()=>({title:"",name:"",createtime:[],status:""}),v=i(""),k=i(0),_=i(P()),l=async()=>{y(!0);try{const e=await Fe({page:p.current,pageSize:p.pageSize,..._.value,tablename:v.value,group_id:k.value});w.value=e.items,p.current=e.page,p.total=e.total}catch{y(!1)}finally{y(!1)}},d=i(),D=async()=>{m.value=await Ke({}),m.value&&m.value.length>0?(g.value=[m.value[0].id],d.value=m.value[0],v.value=m.value[0].tablename,k.value=m.value[0].id,L(()=>{l()})):y(!1)},K=()=>{D()},g=i([]),J=e=>{w.value=[],p.current=1,y(!0),g.value=[e.id],v.value=e.tablename,k.value=e.id,d.value=e,l()},T=e=>{e==2&&!d.value?o.error("\u672A\u9009\u62E9\u7F16\u8F91\u6570\u636E"):e==2&&(d.value?.data_from=="common"||d.value?.business_id!=M.$state.business_id)?o.error("\u60A8\u6CA1\u6709\u7F16\u8F91\u6743\u9650\uFF0C\u53EA\u80FD\u7F16\u8F91\u81EA\u5DF1\u6DFB\u52A0\u6570\u636E"):j(!0,{isUpdate:e==2,record:e==2?d:null})},W=()=>{d.value?d.value?.data_from=="common"||d.value?.business_id!=M.$state.business_id?o.error("\u8BE5\u5206\u7C7B\u4F60\u6CA1\u6709\u5220\u9664\u6743\u9650"):ze.warning({title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5185\u5BB9\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{o.loading({content:"\u5220\u9664\u4E2D",id:"upStatus",duration:0}),await Je({ids:g.value}),L(()=>{o.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus",duration:200}),D()})}}):o.error("\u672A\u9009\u62E9\u5220\u9664\u6570\u636E")};Ee(()=>{D()});const X=()=>{_.value=P(),l()};Ae(()=>Ze.value,e=>{I.value=ye(e)},{deep:!0,immediate:!0});const q=()=>{!g.value||g.value.length==0?o.error("\u672A\u9009\u62E9\u5B57\u5178\u6570\u636E"):S(!0,{isUpdate:!1,tablename:v.value,group_id:g.value[0],record:null})},Q=async e=>{S(!0,{isUpdate:!0,tablename:v.value,group_id:g.value[0],record:e})},Z=async()=>{l()},ee=e=>{p.current=e,l()},te=e=>{p.pageSize=e,l()},ae=async e=>{try{o.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:0}),await xe({id:e.id,status:e.status,tablename:v.value}),o.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus",duration:2e3})}catch{e.status=e.status==1?0:1,o.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:1})}},ne=async e=>{try{o.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await Ce({ids:[e.id],tablename:v.value}),l(),o.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{o.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}};return(e,a)=>{const se=f("icon-plus"),F=Pe,ue=f("icon-edit"),oe=f("icon-delete"),U=Te,N=Ue,le=f("icon-right"),$=Ne,ie=$e,de=Re,ce=He,re=f("icon-search"),pe=f("cell-tag-plus"),me=Le,_e=Oe,ge=Ye,ve=je,fe=f("page-card"),B=Me("permission");return h(),E("div",et,[n(fe,{breadcrumb:"",isFullscreen:V.value},{default:s(()=>[u("div",tt,[u("div",at,[u("div",nt,[n(U,null,{default:s(()=>[A((h(),C(F,{type:"primary",onClick:a[0]||(a[0]=t=>T(1))},{default:s(()=>[n(se),a[7]||(a[7]=u("span",{style:{"padding-left":"3px"}},"\u6DFB\u52A0",-1))]),_:1})),[[B,"addcate"]]),A((h(),C(F,{type:"primary",status:"warning",onClick:a[1]||(a[1]=t=>T(2))},{default:s(()=>[n(ue),a[8]||(a[8]=u("span",{style:{"padding-left":"3px"}},"\u4FEE\u6539",-1))]),_:1})),[[B,"addcate"]]),A((h(),C(F,{type:"primary",status:"danger",onClick:W},{default:s(()=>[n(oe),a[9]||(a[9]=u("span",{style:{"padding-left":"3px"}},"\u5220\u9664",-1))]),_:1})),[[B,"delcate"]])]),_:1})]),u("div",st,[n($,{data:m.value,"row-key":"id",onRowClick:J,"selected-keys":g.value,scroll:{y:"100%"},pagination:!1,bordered:{wrapper:!0,cell:!0},style:{"margin-top":"10px"}},{columns:s(()=>[n(N,{title:"",width:50,"data-index":"id"}),n(N,{title:"\u5B57\u5178\u540D\u79F0","data-index":"title"},{cell:s(({record:t})=>[u("div",ut,[u("div",ot,x(t.title),1),u("div",lt,[n(le)])])]),_:1})]),_:1},8,["data","selected-keys"])])]),u("div",it,[u("div",dt,[u("div",ct,[u("div",rt,[n(U,null,{default:s(()=>[n(ie,{style:{width:"160px"},modelValue:_.value.title,"onUpdate:modelValue":a[2]||(a[2]=t=>_.value.title=t),placeholder:"\u641C\u7D22\u5B57\u5178\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),n(de,{modelValue:_.value.createtime,"onUpdate:modelValue":a[3]||(a[3]=t=>_.value.createtime=t),shortcuts:r(We),"shortcuts-position":"left",style:{width:"250px"},onChange:l},null,8,["modelValue","shortcuts"]),n(ce,{modelValue:_.value.status,"onUpdate:modelValue":a[4]||(a[4]=t=>_.value.status=t),options:r(Qe),placeholder:"\u72B6\u6001",style:{width:"90px"},onChange:l},null,8,["modelValue","options"]),n(F,{type:"primary",onClick:l},{icon:s(()=>[n(re)]),default:s(()=>[b(" "+x(e.$t("searchTable.form.search")),1)]),_:1}),n(F,{onClick:X},{default:s(()=>[b(x(e.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),u("div",pt,[n(r(qe),{showbtn:["create","refresh","selectdensity","fullscreen"],onCreate:q,onRefresh:l,onSelectdensity:a[5]||(a[5]=t=>z.value=t),onFullscreen:a[6]||(a[6]=t=>V.value=t)})])]),u("div",mt,[n($,{"row-key":"id",loading:r(G),pagination:p,columns:I.value,data:w.value,bordered:{wrapper:!0,cell:!0},size:z.value,"default-expand-all-rows":!0,ref:"artable",scroll:{x:"100%",y:"100%"},onPageChange:ee,onPageSizeChange:te},{title:s(({record:t,column:c})=>[t[c.dataIndex]?(h(),C(pe,{key:0,color:t.tagcolor,value:t[c.dataIndex]},null,8,["color","value"])):Se("",!0)]),des:s(({record:t,column:c})=>[n(me,{ellipsis:{rows:2,expandable:!0}},{default:s(()=>[b(x(t[c.dataIndex]),1)]),_:2},1024)]),createtime:s(({record:t})=>[b(x(r(Ie)(t.createtime).format("YYYY-MM-DD HH:mm")),1)]),status:s(({record:t})=>[n(_e,{type:"round",modelValue:t.status,"onUpdate:modelValue":c=>t.status=c,"checked-value":0,"unchecked-value":1,onChange:c=>ae(t)},{checked:s(()=>[...a[10]||(a[10]=[b(" \u5F00 ",-1)])]),unchecked:s(()=>[...a[11]||(a[11]=[b(" \u5173 ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),operations:s(({record:t})=>[t.data_from=="business"?(h(),E(Ve,{key:0},[n(r(H),{icon:"svgfont-bianji1",class:"iconbtn",onClick:c=>Q(t),size:18,color:"rgb(var(--arcoblue-6))"},null,8,["onClick"]),n(ge,{direction:"vertical"}),n(ve,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:c=>ne(t),position:"tr"},{default:s(()=>[n(r(H),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])],64)):(h(),E("span",_t,"\u516C\u5171\u6570\u636E"))]),_:1},8,["loading","pagination","columns","data","size"])])])])])]),_:1},8,["isFullscreen"]),n(Xe,{onRegister:r(O),onSuccess:Z},null,8,["onRegister"]),n(Ge,{onRegister:r(Y),onSuccess:K},null,8,["onRegister"])])}}});const Nt=we(vt,[["__scopeId","data-v-6016a6b4"]]);export{Nt as default};
