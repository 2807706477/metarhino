import{i as Q,x as Z,_ as ee}from"./index.55d7b75d.js";/* empty css               *//* empty css                *//* empty css               *//* empty css              */import{c as te,d as ae,r as g,j as ue,o as oe,w as le,aK as b,b4 as ne,F as d,G as se,H as p,aU as a,aT as t,u as _,aW as l,aX as s,b2 as ie,aH as m,aI as re,c9 as de,aO as ce,aP as w,bx as pe,cf as me,bf as _e,bm as fe,b6 as ge,bh as he,cq as De,bT as ve,cr as Ce,ba as ye,b8 as Fe,aR as xe,c8 as be}from"./arco.c01548ff.js";import{g as we,d as Ee}from"./index.c625bba8.js";import{t as Be}from"./index.e82140b2.js";import Ie from"./DetailDrawer.13a9c31f.js";import{s as ke}from"./dayjs.e902488c.js";import"./chart.a60a60a0.js";import"./vue.c31cb100.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                */import"./common.18828855.js";/* empty css              */import"./styles.e4094863.js";const T=te(()=>[{title:"ID",dataIndex:"id",ellipsis:!0,tooltip:!0,width:80,align:"left"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",ellipsis:!0,tooltip:!0,width:160,align:"center"},{title:"\u64CD\u4F5C\u4EBA",dataIndex:"user",slotName:"user",width:150,ellipsis:!0,tooltip:!0,align:"left"},{title:"\u64CD\u4F5C\u5185\u5BB9",dataIndex:"des",ellipsis:!0,tooltip:!0,width:160,align:"left"},{title:"\u8BF7\u6C42\u65B9\u5F0F",dataIndex:"request_method",render:({record:i})=>Pe(i),width:90,align:"left"},{title:"\u8BF7\u6C42URL",dataIndex:"url",width:250,ellipsis:!0,tooltip:!0,align:"left"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",width:90,align:"center"},{title:"\u64CD\u4F5C IP",dataIndex:"ip",ellipsis:!0,tooltip:!0,width:110,align:"left"},{title:"\u64CD\u4F5C\u5730\u70B9",dataIndex:"address",width:160,render:({record:i,column:h})=>{if(h.dataIndex)return i[h.dataIndex].replace("|0|","|")},ellipsis:!0,tooltip:!0,align:"center"},{title:"\u8017\u65F6",dataIndex:"latency",slotName:"latency",width:110,align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:80,align:"center"}]),Ve=[{label:"\u5168\u90E8",value:""},{label:"\u6210\u529F",value:200},{label:"\u5931\u8D25",value:1}],Pe=i=>i.request_method=="GET"?"\u8BFB\u53D6\u6570\u636E":i.request_method=="POST"?"\u63D0\u4EA4\u6570\u636E":i.request_method=="PUT"?"\u4FEE\u6539\u6570\u636E":i.request_method=="DELETE"?"\u5220\u9664\u6570\u636E":"\u672A\u77E5",Te={class:"custom-full-table"},Se={class:"table-toolbar flex flex-between"},Ae={class:"left"},Ne={class:"right"},ze={class:"table-container"},Le={style:{"min-width":"180px"}},Me=ae({__name:"index",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(i,{emit:h}){const S=h,{loading:A,setLoading:E}=Q(!0),B=g([]),v=g([]),C=g(!1),I=g(),c=ue({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),k=()=>({user:"",ip:"",createtime:[],status:""}),n=g(k()),r=async()=>{E(!0);try{const o=await we({page:c.current,pageSize:c.pageSize,...n.value});B.value=o.items,c.current=o.page,c.total=o.total}catch{}finally{E(!1)}},N=o=>{c.current=o,r()},z=o=>{c.pageSize=o,r()},L=()=>{n.value=k(),r()},M=o=>{S("update:modelValue",o)},O=o=>{C.value=!0,I.value=o},U=()=>{ce.warning({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u4E00\u4E2A\u6708\u524D\u7684\u65E5\u5FD7\uFF1F",content:"\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D\uFF0C\u654F\u611F\u6570\u636E\u9700\u8981\u8C28\u614E\u64CD\u4F5C\u54E6\uFF01",hideCancel:!1,titleAlign:"start",onOk:async()=>{try{w.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await Ee(),r(),w.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{w.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}}})};return oe(()=>{r()}),le(()=>T.value,o=>{v.value=Z(o)},{deep:!0,immediate:!0}),(o,u)=>{const y=b("icon-search"),V=pe,Y=me,q=_e,F=fe,H=ge,G=he,D=De,R=ve,$=Ce,j=b("CellAvatar"),K=ye,P=b("GfDot"),f=Fe,W=xe,X=be,J=ne("permission");return d(),se("div",Te,[p("div",Se,[p("div",Ae,[a(H,null,{default:t(()=>[a(V,{modelValue:n.value.user,"onUpdate:modelValue":u[0]||(u[0]=e=>n.value.user=e),placeholder:"\u8BF7\u8F93\u5165\u64CD\u4F5C\u4EBA",style:{width:"180px"},"allow-clear":""},{prefix:t(()=>[a(y)]),_:1},8,["modelValue"]),a(V,{modelValue:n.value.ip,"onUpdate:modelValue":u[1]||(u[1]=e=>n.value.ip=e),placeholder:"\u8BF7\u8F93\u5165\u64CD\u4F5C IP \u6216\u5730\u70B9",style:{width:"190px"},"allow-clear":""},{prefix:t(()=>[a(y)]),_:1},8,["modelValue"]),a(Y,{modelValue:n.value.createtime,"onUpdate:modelValue":u[2]||(u[2]=e=>n.value.createtime=e),format:"YYYY-MM-DD HH:mm","show-time":!0,shortcuts:_(ke),"shortcuts-position":"left",style:{width:"310px"},onChange:r},null,8,["modelValue","shortcuts"]),a(q,{modelValue:n.value.status,"onUpdate:modelValue":u[3]||(u[3]=e=>n.value.status=e),options:_(Ve),placeholder:"\u72B6\u6001",style:{width:"120px"},onChange:r},null,8,["modelValue","options"]),a(F,{type:"primary",onClick:r},{icon:t(()=>[a(y)]),default:t(()=>[l(" "+s(o.$t("searchTable.form.search")),1)]),_:1}),a(F,{onClick:L},{default:t(()=>[l(s(o.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),p("div",Ne,[a(_(Be),{showbtn:["refresh","settingcolumn","fullscreen"],columns:_(T),disabledColumnKeys:["id"],onSettingcolumn:u[4]||(u[4]=e=>v.value=e),onRefresh:r,onFullscreen:M},{default:t(()=>[a(G,{content:"\u5220\u9664\u4E00\u4E2A\u6708\u4E4B\u524D\u7684\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[ie((d(),m(F,{class:"gf_hover_btn-border",onClick:U},{default:t(()=>[...u[6]||(u[6]=[l("\u5220\u9664\u65E5\u5FD7",-1)])]),_:1})),[[J,"delLastOperation"]])]),_:1})]),_:1},8,["columns"])])]),p("div",ze,[a(X,{"row-key":"id",loading:_(A),scrollbar:!0,pagination:c,columns:v.value,data:B.value,scroll:{x:"100%",y:"100%",minWidth:1e3},ref:"artable",onPageChange:N,onPageSizeChange:z},{user:t(({record:e})=>[a(K,null,{content:t(()=>[p("div",Le,[a($,{column:1},{default:t(()=>[a(D,{label:"\u7528\u6237ID"},{default:t(()=>[l(s(e.uid),1)]),_:2},1024),a(D,{label:"\u7528\u6237\u540D"},{default:t(()=>[l(s(e.user.name),1)]),_:2},1024),a(D,{label:"\u6635  \u79F0"},{default:t(()=>[l(s(e.user.nickname),1)]),_:2},1024),a(D,{label:"\u8D26  \u53F7"},{default:t(()=>[a(R,{copyable:""},{default:t(()=>[l(s(e.user.username),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),default:t(()=>[e.user?(d(),m(j,{key:0,spacesize:1,size:20,avatar:e.user.avatar,name:e.user.name,"is-link":""},null,8,["avatar","name"])):re("",!0)]),_:2},1024)]),status:t(({record:e,column:x})=>[e[x.dataIndex]===0||e[x.dataIndex]===200?(d(),m(f,{key:0,color:"green"},{default:t(()=>[a(P,{type:"success",style:{width:"5px",height:"5px"}}),u[7]||(u[7]=p("span",{style:{"margin-left":"5px"}},"\u6210\u529F",-1))]),_:1})):(d(),m(f,{key:1,color:"red",style:{cursor:"pointer"}},{default:t(()=>[a(P,{type:"danger",style:{width:"5px",height:"5px"}}),u[8]||(u[8]=p("span",{style:{"margin-left":"5px"}},"\u5931\u8D25",-1))]),_:1}))]),createtime:t(({record:e})=>[l(s(_(de)(e.createtime).format("YYYY-MM-DD HH:mm")),1)]),latency:t(({record:e})=>[e.latency>500?(d(),m(f,{key:0,color:"red"},{default:t(()=>[l(s(e.latency)+"ms",1)]),_:2},1024)):e.latency>200?(d(),m(f,{key:1,color:"orange"},{default:t(()=>[l(s(e.latency)+"ms",1)]),_:2},1024)):(d(),m(f,{key:2,color:"green"},{default:t(()=>[l(s(e.latency)+" ms",1)]),_:2},1024))]),operations:t(({record:e})=>[a(W,{status:"success",onClick:x=>O(e)},{default:t(()=>[...u[9]||(u[9]=[l("\u8BE6\u60C5",-1)])]),_:1},8,["onClick"])]),_:1},8,["loading","pagination","columns","data"])]),a(Ie,{modelValue:C.value,"onUpdate:modelValue":u[5]||(u[5]=e=>C.value=e),record:I.value},null,8,["modelValue","record"])])}}});const lt=ee(Me,[["__scopeId","data-v-dcec496f"]]);export{lt as default};
