import{h as D,B as M,i as C,m as y,n as v,_ as k}from"./index.55d7b75d.js";/* empty css               *//* empty css               *//* empty css              */import{d as A,r as i,u as h,c as R,aP as F,aK as T,F as U,aH as H,aT as o,H as p,aU as a,b3 as L,bx as O,bK as S,be as $,c5 as I,bC as N,br as P,c6 as j,bd as q,bN as z}from"./arco.c01548ff.js";function K(e){return D.get({url:"/createcode/picturecate/getTree",params:e},{errorMessageMode:"message"})}function Y(e){return D.post({url:"/createcode/picturecate/save",params:e},{errorMessageMode:"message"})}function le(e){return D.delete({url:"/createcode/picturecate/del",params:e},{errorMessageMode:"message"})}const G=A({name:"CateForm",components:{BasicModal:M},emits:["success"],setup(e,{emit:s}){const m=i(!1),w=i(350),c=i([]),{loading:E,setLoading:r}=C(),l=i(),n={id:0,name:"",pid:0,status:0,weigh:1,remark:""},d=i(n),[f,{setModalProps:g,closeModal:_}]=y(async u=>{l.value?.resetFields(),r(!0),g({confirmLoading:!1});const t=await K({}),V=[{id:0,name:"\u4E00\u7EA7\u6570\u636E"}];t?c.value=V.concat(t):c.value=V,m.value=!!u?.isUpdate,h(m)?(u.record.children&&delete u.record.children,d.value=v(u.record)):(d.value=v(n),d.value.pid=u.record.pid),r(!1)}),b=R(()=>h(m)?"\u7F16\u8F91\u6570\u636E":"\u65B0\u589E\u6570\u636E");return{registerModal:f,getTitle:b,handleSubmit:async()=>{try{if(!await l.value?.validate()){r(!0),F.loading({content:"\u63D0\u4EA4\u4E2D",id:"submit",duration:0});let t=v(h(d));await Y(t),F.success({content:"\u63D0\u4EA4\u6210\u529F",id:"submit",duration:2e3}),_(),s("success"),r(!1)}}catch{r(!1),F.loading({content:"\u63D0\u4EA4\u4E2D",id:"submit",duration:1})}},formRef:l,loading:E,formData:d,OYoptions:[{label:"\u6B63\u5E38",value:0},{label:"\u7981\u7528",value:1}],modelHeight:w,treeList:c}}});const J={class:"addFormbox"},Q={class:"tabs-content"},W={class:"content_box"},X={class:"besecontent"};function Z(e,s,m,w,c,E){const r=O,l=S,n=$,d=I,f=N,g=P,_=j,b=q,B=z,u=T("BasicModal");return U(),H(u,L(e.$attrs,{onRegister:e.registerModal,isPadding:!1,loading:e.loading,width:"600px",minHeight:e.modelHeight,title:e.getTitle,onOk:e.handleSubmit}),{default:o(()=>[p("div",J,[p("div",Q,[a(B,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:o(()=>[p("div",W,[p("div",X,[a(b,{gutter:16},{default:o(()=>[a(n,{span:22},{default:o(()=>[a(l,{field:"name",label:"\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u540D\u79F0"}]},{default:o(()=>[a(r,{modelValue:e.formData.name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.formData.name=t),placeholder:"\u8BF7\u586B\u540D\u79F0","max-length":50,"allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:22},{default:o(()=>[a(l,{field:"pid",label:"\u4E0A\u7EA7","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u540D\u79F0"}]},{default:o(()=>[a(d,{placeholder:"\u9009\u62E9\u4E0A\u7EA7",data:e.treeList,modelValue:e.formData.pid,"onUpdate:modelValue":s[1]||(s[1]=t=>e.formData.pid=t),"allow-search":"",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["data","modelValue"])]),_:1})]),_:1}),a(n,{span:11},{default:o(()=>[a(l,{field:"weigh",label:"\u6392\u5E8F","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:o(()=>[a(f,{modelValue:e.formData.weigh,"onUpdate:modelValue":s[2]||(s[2]=t=>e.formData.weigh=t),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:o(()=>[a(l,{field:"status",label:"\u72B6\u6001",style:{"margin-bottom":"5px"}},{default:o(()=>[a(g,{modelValue:e.formData.status,"onUpdate:modelValue":s[3]||(s[3]=t=>e.formData.status=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1}),a(n,{span:22},{default:o(()=>[a(l,{field:"remark",label:"\u5907\u6CE8",style:{"margin-bottom":"15px"}},{default:o(()=>[a(_,{modelValue:e.formData.remark,"onUpdate:modelValue":s[4]||(s[4]=t=>e.formData.remark=t),placeholder:"\u8BF7\u586B\u5907\u6CE8","max-length":200,"allow-clear":"","show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["model"])])])]),_:1},16,["onRegister","loading","minHeight","title","onOk"])}const x=k(G,[["render",Z],["__scopeId","data-v-ed587320"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as C,ue as a,le as d,K as g};
