import{p as G,i as Ce,x as xe,I as p,_ as ye}from"./index.fe83b6cf.js";/* empty css                *//* empty css               *//* empty css               *//* empty css              */import{c as ke,d as Fe,r as l,j as Ee,o as ze,w as Be,aK as w,F as c,G as F,aU as a,aT as s,H as o,I as E,u as i,aH as g,aY as De,aX as P,aW as z,aI as W,n as X,aP as f,aO as Ie,bh as Ve,ba as Se,cd as Ae,bx as Pe,b6 as Te,bm as Me,bE as Re,c7 as Ue,c8 as $e,ce as Ne}from"./arco.31164f47.js";import{A as Oe,g as je,d as Le}from"./AddForm.674ab20d.js";import{C as He,g as Ge,d as We}from"./CateForm.7d207b24.js";import{t as Xe}from"./index.7089f47a.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import"./common.c09afe5e.js";const Y=ke(()=>[{title:"ID",dataIndex:"id",align:"left",width:80,sortable:{sortDirections:["ascend"],defaultSortOrder:"ascend"}},{title:"\u8D26\u53F7\u6635\u79F0",dataIndex:"account_name",align:"left",width:190},{title:"\u4EA4\u6613\u5BF9",dataIndex:"symbol",align:"left",width:190},{title:"\u5206\u7C7B",dataIndex:"cidName",align:"left",width:100},{title:"API",dataIndex:"apikey",align:"left",width:250},{title:"secret",dataIndex:"secret",align:"left",width:250},{title:"\u5BC6\u7801",dataIndex:"password",align:"left",width:250},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:100,align:"center"}]),Ye={class:"container"},qe={class:"split-menu"},Je={class:"list-header-wrapper"},Qe={class:"list-header"},Ze={class:"collapse-root"},Ke={class:"tablebox"},et={class:"scrollbarcontainer"},tt={class:"titleBox"},nt={key:1,class:"titleBox"},at={class:"tigmenu"},ot=["onClick"],st=["onClick"],lt={class:"optional-operation-wrapper"},it={class:"flex-page contentbox"},ut={class:"custom-full-table"},ct={class:"search-field"},rt={class:"search-btn"},dt={class:"search-option"},pt={class:"table-container"},mt={name:"exchange"},vt=Fe({...mt,setup(gt){const T=l("205px"),[q,{openModal:M}]=G(),[J,{openModal:R}]=G(),C=l(null),h=l([]),B=l([0]),D=l(0),Q=async n=>{B.value=n,u.value.cid=n[0],X(()=>{d()}),D.value!=n[0]?(C.value?.expandNode(n,!0),D.value=n[0]):(C.value?.expandNode(n,!1),D.value=0)},r=Ee({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:Z,setLoading:x}=Ce(!0),U=l([]),I=l([]),$=l(!1),N=l("large"),O=()=>({account_name:"",cid:0,id:"",symbol:""}),u=l(O()),d=async()=>{x(!0);try{const n=await je({page:r.current,pageSize:r.pageSize,...u.value});U.value=n.items,r.current=n.page,r.total=n.total}catch{}finally{x(!1)}},V=async n=>{const e=await Ge({}),v=[{key:0,exchange_name:"\u5168\u90E8\u6570\u636E"}];console.log("\u540E\u7AEF\u8FD4\u56DE\u6570\u636E",e),e?h.value=v.concat(e):h.value=v,n!=1&&(x(!1),h.value&&h.value.length>0&&X(()=>{x(!0),d()}))},S=l(null),_=l(!1),b=l(!1);ze(()=>{V(0),j(),window.onresize=()=>{j()}});const j=()=>{S.value&&(S.value.offsetHeight>40?b.value=!0:(b.value=!1,_.value=!1))},K=()=>{r.current=1,d()},ee=()=>{r.current=1,u.value=O(),d()};Be(()=>Y.value,n=>{I.value=xe(n)},{deep:!0,immediate:!0});const te=()=>{M(!0,{isUpdate:!1,record:null})},ne=async n=>{M(!0,{isUpdate:!0,record:n})},ae=async()=>{r.current=1,d()},oe=n=>{r.current=n,d()},se=n=>{r.pageSize=n,d()},le=async n=>{try{f.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await Le({ids:[n.id]}),d(),f.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{f.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}},y=l(!0);function ie(){y.value=!y.value,C.value?.expandAll(y.value)}const L=n=>{R(!0,{isUpdate:!1,record:{pid:n}})},ue=n=>{R(!0,{isUpdate:!0,record:n})},ce=async n=>{Ie.warning({title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5185\u5BB9\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{try{f.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await We({ids:[n]})&&(V(0),u.value.cid==n&&(u.value.cid=0,B.value=[0]),f.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3}))}catch{f.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}}})};return(n,e)=>{const v=Ve,re=w("IconDown"),de=Se,pe=Ae,k=Pe,H=Te,me=w("icon-up"),ve=w("icon-down"),A=Me,ge=w("icon-search"),_e=Re,fe=Ue,he=$e,be=Ne,we=w("page-card");return c(),F("div",Ye,[a(we,{breadcrumb:"",isFullscreen:$.value},{default:s(()=>[a(be,{style:{width:"100%",height:"100%"},size:T.value,"onUpdate:size":e[10]||(e[10]=t=>T.value=t),min:150,max:800},{"resize-trigger":s(()=>[...e[12]||(e[12]=[o("div",{class:"resizebox-line toggle-list"},[o("div",{class:"resizebox-line-icon"})],-1)])]),first:s(()=>[o("div",qe,[o("div",Je,[o("div",Qe,[e[13]||(e[13]=o("span",{class:"catalogue-title"},"\u5206\u7C7B\u7BA1\u7406",-1)),o("div",Ze,[o("span",{class:E(["header-operation",`collapse-toggle-${y.value?"down":"up"}`]),onClick:e[0]||(e[0]=()=>{ie()})},null,2)]),a(v,{content:"\u65B0\u5EFA\u5206\u7C7B"},{default:s(()=>[a(i(p),{class:"addicon",onClick:e[1]||(e[1]=t=>L(0)),icon:"icon-plus-circle-fill",size:29,color:"#055fe6"})]),_:1})])]),o("div",Ke,[o("div",et,[a(pe,{blockNode:!0,data:h.value,"show-line":!0,ref_key:"treeRef",ref:C,"selected-keys":B.value,onSelect:Q},{"switcher-icon":s((t,{isLeaf:m})=>[m?(c(),F(De,{key:1},[t.key!=0?(c(),g(i(p),{key:0,class:"yuandian",icon:"svgfont-yuandian2",size:15})):(c(),g(i(p),{key:1,class:"yuandian",icon:"svgfont-home",size:15}))],64)):(c(),g(re,{key:0}))]),title:s(t=>[t.exchange_name.length>=8?(c(),g(v,{key:0,content:t.exchange_name,"background-color":"#4e5969"},{default:s(()=>[o("span",tt,P(t.exchange_name),1)]),_:2},1032,["content"])):(c(),F("span",nt,P(t.exchange_name),1))]),extra:s(t=>[t.key!=0?(c(),F("span",{key:0,class:E(["page-tree-tool",{"page-tree-tool-active":t.showbtn}])},[a(de,{position:"br",trigger:"click","popup-visible":t.showbtn,onPopupVisibleChange:m=>t.showbtn=m},{content:s(()=>[o("div",at,[o("div",{class:"item",onClick:m=>ue(t)},[a(i(p),{class:"bicon",icon:"svgfont-bianji1",size:13}),e[14]||(e[14]=z(" \u7F16\u8F91",-1))],8,ot),o("div",{class:"item delete",onClick:m=>ce(t.id)},[a(i(p),{class:"bicon",icon:"svgfont-icon7",size:13}),e[15]||(e[15]=z(" \u5220\u9664",-1))],8,st)])]),default:s(()=>[a(i(p),{class:"unicon page-tree-menu-button",icon:"svgfont-gengduo",size:13})]),_:2},1032,["popup-visible","onPopupVisibleChange"]),o("span",lt,[a(v,{content:"\u521B\u5EFA\u5B50\u6570\u636E"},{default:s(()=>[a(i(p),{class:"unicon",onClick:m=>L(t.id),icon:"svgfont-jia",size:12},null,8,["onClick"])]),_:2},1024)])],2)):W("",!0)]),_:1},8,["data","selected-keys"])])])])]),second:s(()=>[o("div",it,[o("div",ut,[o("div",{class:E(["search-row",{unhasesearchbtn:!b.value,hasesearchbtn:b.value}])},[o("div",ct,[o("div",{class:E(["search-line search-drown",{searchdowncss:_.value}])},[o("div",{class:"search-drown-box",ref_key:"searchRef",ref:S},[a(H,{wrap:""},{default:s(()=>[a(k,{style:{width:"120px"},modelValue:u.value.id,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.id=t),placeholder:"\u8F93\u5165ID","allow-clear":""},null,8,["modelValue"]),a(k,{style:{width:"120px"},modelValue:u.value.account_name,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.account_name=t),placeholder:"\u8F93\u5165\u8D26\u53F7\u6635\u79F0","allow-clear":""},null,8,["modelValue"]),a(k,{style:{width:"120px"},modelValue:u.value.cid,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.cid=t),placeholder:"\u8F93\u5165\u5206\u7C7B","allow-clear":""},null,8,["modelValue"]),a(k,{style:{width:"120px"},modelValue:u.value.symbol,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value.symbol=t),placeholder:"\u8F93\u5165\u4EA4\u6613\u5BF9","allow-clear":""},null,8,["modelValue"])]),_:1})],512)],2)]),o("div",rt,[a(H,null,{default:s(()=>[a(v,{mini:"",content:_.value?"\u6536\u8D77\u67E5\u8BE2\u6761\u4EF6":"\u5C55\u5F00\u67E5\u8BE2\u6761\u4EF6"},{default:s(()=>[b.value?(c(),g(A,{key:0,onClick:e[6]||(e[6]=t=>_.value=!_.value)},{icon:s(()=>[_.value?(c(),g(me,{key:0})):(c(),g(ve,{key:1}))]),_:1})):W("",!0)]),_:1},8,["content"]),a(A,{type:"primary",onClick:K},{icon:s(()=>[a(ge)]),default:s(()=>[e[16]||(e[16]=z(" \u67E5\u8BE2 ",-1))]),_:1}),a(A,{onClick:ee},{default:s(()=>[z(P(n.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),o("div",dt,[a(i(Xe),{showbtn:["create","refresh","selectdensity","settingcolumn","fullscreen"],columns:i(Y),disabledColumnKeys:["id"],onCreate:te,onRefresh:d,onSelectdensity:e[7]||(e[7]=t=>N.value=t),onFullscreen:e[8]||(e[8]=t=>$.value=t),onSettingcolumn:e[9]||(e[9]=t=>I.value=t)},null,8,["columns"])])],2),o("div",pt,[a(he,{"row-key":"id",loading:i(Z),pagination:r,columns:I.value,data:U.value,bordered:{wrapper:!0,cell:!0},size:N.value,"default-expand-all-rows":!0,ref:"artable",scroll:{x:"100%",y:"100%"},onPageChange:oe,onPageSizeChange:se},{operations:s(({record:t})=>[a(i(p),{icon:"svgfont-bianji1",class:"iconbtn",onClick:m=>ne(t),size:18,color:"#0960bd"},null,8,["onClick"]),a(_e,{direction:"vertical"}),a(fe,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:m=>le(t)},{default:s(()=>[a(i(p),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])]),_:1},8,["loading","pagination","columns","data","size"])])])])]),_:1},8,["size"])]),_:1},8,["isFullscreen"]),a(Oe,{onRegister:i(q),onSuccess:ae},null,8,["onRegister"]),a(He,{onRegister:i(J),onSuccess:e[11]||(e[11]=t=>V(1))},null,8,["onRegister"])])}}});const Pt=ye(vt,[["__scopeId","data-v-a0298730"]]);export{Pt as default};
