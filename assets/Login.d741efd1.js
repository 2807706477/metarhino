import{q as M,h as A,b as H,K as U,_ as O}from"./index.55d7b75d.js";/* empty css               */import{d as K,aO as N,bm as z,bx as h,bN as S,r,aP as a,aK as T,F as c,aH as j,aT as d,H as s,aU as l,G as F,I as V,aW as C,aX as $,aI as k,bL as G,bK as R}from"./arco.c01548ff.js";import"./chart.a60a60a0.js";import"./vue.c31cb100.js";function W(e,u){return e=Object.assign({},e,{password:M.exports(e.password)}),A.post({url:"/developer/codestore/login?baseurl="+u,params:e},{errorMessageMode:"message"})}function X(e,u){return A.post({url:"/developer/codestore/freeLogin?baseurl="+u,params:e},{errorMessageMode:"message"})}function J(e,u){return e=Object.assign({},e,{password:M.exports(e.password)}),A.post({url:"/developer/codestore/registerUser ?baseurl="+u,params:e},{errorMessageMode:"message"})}function L(e,u){return A.post({url:"/developer/codestore/loginCode?baseurl="+u,params:e},{errorMessageMode:"message"})}const Q=K({name:"Login",components:{AModal:N,AButton:z,AInput:h,AInputPassword:h.Password,AForm:S,AFormItem:S.Item},emits:["ok"],setup(e,{emit:u}){H();const b=r("login"),y=r(!1),p=r(""),I=t=>{p.value=t,y.value=!0,b.value="login",i.value={username:"",password:""},n.value={email:"",password:"",mobile:"",confirmpwd:"",verifycode:""}},w=r("psd"),m=t=>[w.value=t],i=r({username:"",password:""}),f=async()=>{if(!i.value.username)a.error({content:"\u8BF7\u586B\u5199\u767B\u5F55\u8D26\u53F7",id:"vcode",duration:2e3});else if(!i.value.password)a.error({content:"\u8BF7\u586B\u5199\u767B\u5F55\u5BC6\u7801",id:"vcode",duration:2e3});else try{a.loading({content:"\u767B\u5F55\u4E2D",id:"vcode",duration:0});const t=await W(i.value,p.value);t?(a.success({content:"\u767B\u5F55\u6210\u529F",id:"vcode",duration:2e3}),U(t),u("ok",t),y.value=!1):a.error({content:"\u767B\u5F55\u5931\u8D25",id:"vcode",duration:1})}catch{a.loading({content:"\u767B\u5F55\u4E2D",id:"vcode",duration:1})}},n=r({email:"",password:"",mobile:"",confirmpwd:"",verifycode:""}),E=async t=>{t.errors||(a.loading({content:"\u6CE8\u518C\u4E2D",id:"delaction",duration:0}),await J({email:n.value.email,password:n.value.password,mobile:n.value.mobile,code:n.value.verifycode},p.value)?(a.success({content:"\u6CE8\u518C\u6210\u529F",id:"delaction",duration:2e3}),i.value.username=n.value.email,b.value="login"):a.loading({content:"\u6CE8\u518C\u4E2D",id:"delaction",duration:1}))};let B=r();const o=r(60),v=r(!1),_=async()=>{if(!n.value.email)a.error({content:"\u8BF7\u586B\u5199\u90AE\u7BB1\u8D26\u53F7",id:"vcode",duration:2e3});else{if(v.value||o.value!=60)return;v.value=!0,a.loading({content:"\u53D1\u9001\u4E2D\uFF0C\u8BF7\u7A0D\u540E\uFF01",id:"vcode",duration:0}),await L({email:n.value.email},p.value)?a.error({content:"\u53D1\u9001\u5931\u8D25",id:"vcode",duration:2e3}):(B.value=setInterval(()=>{o.value--,o.value==0&&(clearInterval(B.value),o.value=60,v.value=!1)},1e3),a.success({content:"\u53D1\u9001\u6210\u529F\uFF01",id:"vcode",duration:2e3}))}},P=[{validator:(t,D)=>new Promise(q=>{t==null?D("\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"):t!=n.value.password&&D("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4"),q(null)})}],g=r({email:"",verifycode:""});return{visible:y,showLogin:I,changtype:m,logintype:w,dotype:b,onLogin:f,logindata:i,formdata:n,handleSubmit:E,handleSend:_,codeNum:o,rulessecond:P,handleFreeSubmit:async()=>{if(!g.value.email)a.error({content:"\u8BF7\u586B\u5199\u90AE\u7BB1\u8D26\u53F7",id:"vcode",duration:2e3});else if(!g.value.verifycode)a.error({content:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",id:"vcode",duration:2e3});else{a.loading({content:"\u767B\u5F55\u4E2D",id:"vcode",duration:0});const t=await X({...g.value},p.value);t?(a.success({content:"\u767B\u5F55\u6210\u529F",id:"vcode",duration:2e3}),U(t),u("ok",t),y.value=!1):a.loading({content:"\u767B\u5F55\u4E2D",id:"vcode",duration:1})}},freeformdata:g,handleFreeSend:async()=>{if(!g.value.email)a.error({content:"\u8BF7\u586B\u5199\u90AE\u7BB1\u8D26\u53F7",id:"vcode",duration:2e3});else try{if(v.value||o.value!=60)return;v.value=!0,a.loading({content:"\u53D1\u9001\u4E2D\uFF0C\u8BF7\u7A0D\u540E\uFF01",id:"vcode",duration:0}),await L({email:g.value.email},p.value)?(v.value=!1,a.error({content:"\u53D1\u9001\u5931\u8D25",id:"vcode",duration:2e3})):(B.value=setInterval(()=>{o.value--,o.value==0&&(clearInterval(B.value),o.value=60,v.value=!1)},1e3),a.success({content:"\u53D1\u9001\u6210\u529F\uFF01",id:"vcode",duration:2e3}))}catch{a.loading({content:"\u53D1\u9001\u4E2D\uFF0C\u8BF7\u7A0D\u540E\uFF01",id:"vcode",duration:1}),v.value=!1}}}}});const Y={class:"login-box"},Z={class:"login-header"},x={key:0,class:"login-content"},ee={class:"formdata"},ue={class:"tabs"},oe={class:"item"},le={class:"item"},ae={class:"item"},se={class:"formbox"},te={key:0,class:"passwod-login"},ne={class:"inputbox"},de={class:"inputbox"},ie={class:"loginbtn"},re={key:1,class:"free-login"},me={class:"submintbtn"},ve={key:2,class:"wx-login"},pe={class:"options"},fe={key:1,class:"registerbox"},ce={class:"regform"},Be={class:"submintbtn"},ge={class:"options"};function Fe(e,u,b,y,p,I){const w=T("icon-close"),m=h,i=G,f=z,n=R,E=S,B=N;return c(),j(B,{visible:e.visible,"onUpdate:visible":u[17]||(u[17]=o=>e.visible=o),unmountOnClose:"",footer:!1,closable:!1,width:410,"modal-style":{minHeight:"480px"}},{default:d(()=>[s("div",Y,[s("div",Z,[u[18]||(u[18]=s("div",{class:"left"},null,-1)),s("div",{class:"right",onClick:u[0]||(u[0]=o=>e.visible=!1)},[l(w,{class:"fonticon",size:"20"})])]),e.dotype=="login"?(c(),F("div",x,[s("div",ee,[s("div",ue,[s("div",oe,[s("span",{class:V({active:e.logintype=="psd"}),onClick:u[1]||(u[1]=o=>e.changtype("psd"))},"\u5BC6\u7801\u767B\u5F55",2)]),s("div",le,[s("span",{class:V({active:e.logintype=="free"}),onClick:u[2]||(u[2]=o=>e.changtype("free"))},"\u514D\u5BC6\u767B\u5F55",2)]),s("div",ae,[s("span",{class:V({active:e.logintype=="wx"}),onClick:u[3]||(u[3]=o=>e.changtype("wx"))},"\u5FAE\u4FE1\u767B\u5F55",2)])]),s("div",se,[e.logintype=="psd"?(c(),F("div",te,[s("div",ne,[l(m,{style:{width:"320px"},modelValue:e.logindata.username,"onUpdate:modelValue":u[4]||(u[4]=o=>e.logindata.username=o),placeholder:"\u624B\u673A\u53F7/\u90AE\u7BB1/\u7528\u6237\u540D",size:"large","allow-clear":""},null,8,["modelValue"])]),s("div",de,[l(i,{style:{width:"320px"},modelValue:e.logindata.password,"onUpdate:modelValue":u[5]||(u[5]=o=>e.logindata.password=o),placeholder:"\u5BC6\u7801",size:"large","allow-clear":""},null,8,["modelValue"])]),s("div",ie,[l(f,{type:"primary",long:"",shape:"round",size:"large",onClick:e.onLogin},{default:d(()=>[...u[19]||(u[19]=[C("\u767B\u5F55",-1)])]),_:1},8,["onClick"])])])):e.logintype=="free"?(c(),F("div",re,[l(E,{size:"large",model:e.freeformdata,"auto-label-width":"",style:{width:"320px"},onSubmit:e.handleFreeSubmit},{default:d(()=>[l(n,{field:"email",label:"\u90AE\u7BB1"},{default:d(()=>[l(m,{modelValue:e.freeformdata.email,"onUpdate:modelValue":u[6]||(u[6]=o=>e.freeformdata.email=o),placeholder:"\u586B\u5199\u60A8\u7684\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),l(n,{field:"verifycode",label:"\u9A8C\u8BC1\u7801"},{default:d(()=>[l(m,{modelValue:e.freeformdata.verifycode,"onUpdate:modelValue":u[7]||(u[7]=o=>e.freeformdata.verifycode=o),placeholder:"\u90AE\u7BB1\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),l(f,{onClick:u[8]||(u[8]=o=>e.handleFreeSend()),style:{marginLeft:"10px"},status:"success"},{default:d(()=>[C($(e.codeNum==60?"\u53D1\u9001":`(${e.codeNum})\u540E\u91CD\u53D1`),1)]),_:1})]),_:1}),s("div",me,[l(f,{type:"primary","html-type":"submit",long:"",shape:"round",size:"large"},{default:d(()=>[...u[20]||(u[20]=[C("\u7ACB\u5373\u767B\u5F55",-1)])]),_:1})])]),_:1},8,["model","onSubmit"])])):e.logintype=="wx"?(c(),F("div",ve,[...u[21]||(u[21]=[s("div",{style:{"text-align":"center"}},"\u5FAE\u4FE1\u767B\u5F55\u6682\u672A\u5F00\u653E\u8BF7\u4F7F\u7528\u5176\u4ED6\u767B\u5F55",-1)])])):k("",!0)])]),s("div",pe,[e.logintype=="psd"||e.logintype=="free"?(c(),F("div",{key:0,class:"register",onClick:u[9]||(u[9]=o=>e.dotype="register")}," \u6CE8\u518C\u8D26\u53F7 ")):k("",!0)])])):e.dotype=="register"?(c(),F("div",fe,[s("div",ce,[l(E,{ref:"registerRef",size:"large",model:e.formdata,"auto-label-width":"",style:{width:"100%"},onSubmit:e.handleSubmit},{default:d(()=>[l(n,{field:"email",label:"\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1"}]},{default:d(()=>[l(m,{modelValue:e.formdata.email,"onUpdate:modelValue":u[10]||(u[10]=o=>e.formdata.email=o),placeholder:"\u586B\u5199\u60A8\u7684\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),l(n,{field:"verifycode",label:"\u9A8C\u8BC1\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u9A8C\u8BC1\u7801"}]},{default:d(()=>[l(m,{modelValue:e.formdata.verifycode,"onUpdate:modelValue":u[11]||(u[11]=o=>e.formdata.verifycode=o),placeholder:"\u90AE\u7BB1\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),l(f,{onClick:u[12]||(u[12]=o=>e.handleSend()),style:{marginLeft:"10px"},status:"success"},{default:d(()=>[C($(e.codeNum==60?"\u53D1\u9001":`(${e.codeNum})\u540E\u91CD\u53D1`),1)]),_:1})]),_:1}),l(n,{field:"mobile",label:"\u624B\u673A\u53F7\u7801"},{default:d(()=>[l(m,{modelValue:e.formdata.mobile,"onUpdate:modelValue":u[13]||(u[13]=o=>e.formdata.mobile=o),placeholder:"\u586B\u5199\u60A8\u7684\u624B\u673A\u53F7\u7801(\u53EF\u7528\u4E8E\u767B\u5F55)"},null,8,["modelValue"])]),_:1}),l(n,{field:"password",label:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"}]},{default:d(()=>[l(i,{modelValue:e.formdata.password,"onUpdate:modelValue":u[14]||(u[14]=o=>e.formdata.password=o),placeholder:"\u767B\u5F55\u5BC6\u7801","allow-clear":""},null,8,["modelValue"])]),_:1}),l(n,{field:"confirmpwd",label:"\u786E\u8BA4\u5BC6\u7801",rules:e.rulessecond},{default:d(()=>[l(i,{modelValue:e.formdata.confirmpwd,"onUpdate:modelValue":u[15]||(u[15]=o=>e.formdata.confirmpwd=o),placeholder:"\u767B\u5F55\u5BC6\u7801","allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),s("div",Be,[l(f,{type:"primary","html-type":"submit",long:"",shape:"round",size:"large"},{default:d(()=>[...u[22]||(u[22]=[C("\u7ACB\u5373\u6CE8\u518C",-1)])]),_:1})])]),_:1},8,["model","onSubmit"]),s("div",ge,[s("div",{class:"register",onClick:u[16]||(u[16]=o=>e.dotype="login")}," \u6709\u8D26\u53F7 \u53BB\u767B\u5F55 ")])])])):k("",!0)])]),_:1},8,["visible"])}const Ve=O(Q,[["render",Fe],["__scopeId","data-v-10d29395"]]);export{Ve as default};
