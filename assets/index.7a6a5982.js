import{u as O,C,t as b,w as v}from"./index.afcd2e8c.js";import{d as m,r as J,w as g,n as y,a as N,u as S,o as V,C as B,F as h,G as w,c as j,aU as k,aH as x}from"./arco.31164f47.js";import{m as _,n as z,t as T}from"./vue.85c125e1.js";import{P as F}from"./styles.e9716b1f.js";function M(e,s=150,n){let r=()=>{e()};r=_(r,s);const t=()=>{n&&n.immediate&&r(),window.addEventListener("resize",r)},a=()=>{window.removeEventListener("resize",r)};return z(()=>{t()}),T(()=>{a()}),[t,a]}var l=(e=>(e.JSON="application/json",e.HTML="htmlmixed",e.JS="javascript",e))(l||{});const E=m({__name:"CodeMirror",props:{mode:{type:String,default:l.JSON,validator(e){return Object.values(l).includes(e)}},value:{type:String,default:""},theme:{type:String,default:"material-palenight"},readonly:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:s}){const n=e,r=s,i=J();let t;const a=_(d,100),u=O();g(()=>n.value,async o=>{await y();const f=t?.getValue();o!==f&&t?.setValue(o||"")},{flush:"post"}),g(()=>u.getTheme,async o=>{c()},{flush:"post"}),N(()=>{t?.setOption("mode",n.mode)});function c(){S(t)?.setOption("theme",u.getTheme=="light"?"idea":"material-palenight")}function d(){t?.refresh()}async function p(){const o={autoCloseBrackets:!0,autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers"]};t=C(i.value,{value:"",mode:n.mode,readOnly:n.readonly,tabSize:2,theme:n.theme,lineWrapping:!0,lineNumbers:!0,...o}),t?.setValue(n.value),c(),t?.on("change",()=>{r("change",t?.getValue())})}return V(async()=>{await y(),p(),M(a)}),B(()=>{t=null}),(o,f)=>(h(),w("div",{class:"relative !h-full w-full overflow-hidden",style:{height:"100%"},ref_key:"el",ref:i},null,512))}}),L={class:"h-full",style:{height:"100%"}},P=m({__name:"CodeEditor",props:{value:{type:[Object,String]},mode:{type:String,default:l.JSON,validator(e){return Object.values(l).includes(e)}},readonly:{type:Boolean},theme:{type:String},autoFormat:{type:Boolean,default:!0}},emits:["change","update:value","format-error"],setup(e,{emit:s}){const n=e,r=s,i=j(()=>{const{value:a,mode:u,autoFormat:c}=n;if(!c||u!==l.JSON)return a;let d=a;if(b(a))try{d=JSON.parse(a)}catch{return r("format-error",a),a}return JSON.stringify(d,null,2)});function t(a){r("update:value",a),r("change",a)}return(a,u)=>(h(),w("div",L,[k(E,{value:i.value,onChange:t,mode:e.mode,theme:e.theme,readonly:e.readonly},null,8,["value","mode","theme","readonly"])]))}}),U=m({__name:"JsonPreview",props:{data:Object},setup(e){return(s,n)=>(h(),x(S(F),{path:"res",deep:3,showLength:!0,data:e.data},null,8,["data"]))}}),A=v(P);v(U);export{A as C,l as M};
