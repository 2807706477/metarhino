import{i as X,x as q,I as x,_ as J}from"./index.afcd2e8c.js";/* empty css               *//* empty css               *//* empty css              */import{c as Q,d as Z,r as s,w as ee,aK as y,F as p,G as V,aU as n,aT as o,H as m,u as i,aW as c,aX as _,c9 as te,aH as B,aY as ae,aI as ne,n as oe,aP as d,bx as se,cg as le,bf as ue,bm as ie,b6 as ce,bD as de,bE as re,c7 as pe,c8 as me}from"./arco.31164f47.js";import{A as _e,g as fe,u as he,d as ve}from"./AddDrawer.23f9a588.js";import{s as ge}from"./dayjs.37b46cef.js";import{t as xe}from"./index.db4ff5ea.js";import{s as ye}from"./data.d324d80a.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import"./common.bbd0496d.js";const we=Q(()=>[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"name",slotName:"title",width:230},{title:"\u6392\u5E8F",dataIndex:"weigh",width:100,align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",width:100,align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",width:130,align:"center"},{title:"\u5907\u6CE8",dataIndex:"remark",width:200},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:100,align:"center"}]),be={class:"container"},De={class:"table-toolbar flex flex-between"},ke={class:"left"},Fe={class:"right"},Ce=["innerHTML"],Ve={name:"role"},Be=Z({...Ve,setup(Ee){const{loading:E,setLoading:w}=X(!0),f=s(),h=s([]),b=s([]),v=s(!1),D=s("large"),I=s(document.documentElement.clientHeight),k=()=>({name:"",createtime:[],status:""}),l=s(k()),F=s(),g=s(0),u=async()=>{w(!0);try{const t=await fe({...l.value});h.value=t.list,g.value=t.max_pid,oe(()=>{F.value.expandAll()})}catch{}finally{w(!1)}},S=()=>{l.value=k(),u()};u(),ee(()=>we.value,t=>{b.value=q(t)},{deep:!0,immediate:!0});const A=()=>{f.value?.openDrawer({isUpdate:!1,record:null})},N=async t=>{f.value?.openDrawer({isUpdate:!0,record:t})},T=async()=>{u()},U=t=>{h.value=t},M=async t=>{try{d.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:0}),await he({id:t.id,status:t.status}),d.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus",duration:2e3})}catch{t.status=t.status==1?0:1,d.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:1})}},z=async t=>{try{d.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await ve({ids:[t.id]}),u(),d.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{d.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}};return(t,a)=>{const H=se,L=le,Y=ue,$=y("icon-search"),C=ie,P=ce,R=de,O=y("cell-status"),j=re,G=pe,K=me,W=y("page-card");return p(),V("div",be,[n(W,{breadcrumb:"",scrollPage:"",isFullscreen:v.value},{default:o(()=>[m("div",De,[m("div",ke,[n(P,null,{default:o(()=>[n(H,{style:{width:"200px"},modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.name=e),placeholder:"\u641C\u7D22\u89D2\u8272\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),n(L,{modelValue:l.value.createtime,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.createtime=e),shortcuts:i(ge),"shortcuts-position":"left",style:{width:"230px"},onChange:u},null,8,["modelValue","shortcuts"]),n(Y,{modelValue:l.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.status=e),options:i(ye),placeholder:"\u72B6\u6001",style:{width:"90px"},onChange:u},null,8,["modelValue","options"]),n(C,{type:"primary",onClick:u},{icon:o(()=>[n($)]),default:o(()=>[c(" "+_(t.$t("searchTable.form.search")),1)]),_:1}),n(C,{onClick:S},{default:o(()=>[c(_(t.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),m("div",Fe,[n(i(xe),{showbtn:["create","refresh","selectdensity","fullscreen"],onCreate:A,onRefresh:u,onSelectdensity:a[3]||(a[3]=e=>D.value=e),onFullscreen:a[4]||(a[4]=e=>v.value=e)})])]),n(K,{"row-key":"id",loading:i(E),pagination:!1,columns:b.value,data:h.value,bordered:{wrapper:!0,cell:!0},size:D.value,"default-expand-all-rows":!0,scroll:{x:"100%",y:v.value?I.value-70+"px":""},ref_key:"artable",ref:F,onChange:U},{title:o(({record:e})=>[m("span",{innerHTML:e.spacer,style:{"padding-right":"5px",color:"var(--color-neutral-4)"}},null,8,Ce),c(_(e.name),1)]),icon:o(({record:e})=>[n(i(x),{icon:e.icon,size:20},null,8,["icon"])]),createtime:o(({record:e})=>[c(_(i(te)(e.createtime).format("YYYY-MM-DD")),1)]),status:o(({record:e})=>[e.account_id!=0&&(e.pid==0||e.pid!=g.value)?(p(),B(R,{key:0,type:"round",modelValue:e.status,"onUpdate:modelValue":r=>e.status=r,"checked-value":0,"unchecked-value":1,onChange:r=>M(e)},{checked:o(()=>[...a[5]||(a[5]=[c(" \u5F00 ",-1)])]),unchecked:o(()=>[...a[6]||(a[6]=[c(" \u5173 ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])):(p(),B(O,{key:1,status:e.status},null,8,["status"]))]),operations:o(({record:e})=>[e.account_id!=0&&(e.pid==0||e.pid!=g.value)?(p(),V(ae,{key:0},[n(i(x),{icon:"svgfont-bianji1",class:"iconbtn",onClick:r=>N(e),size:18,color:"#0960bd"},null,8,["onClick"]),n(j,{direction:"vertical"}),n(G,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:r=>z(e)},{default:o(()=>[n(i(x),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])],64)):ne("",!0)]),_:1},8,["loading","columns","data","size","scroll"])]),_:1},8,["isFullscreen"]),n(_e,{ref_key:"AddFormRef",ref:f,onSuccess:T},null,512)])}}});const We=J(Be,[["__scopeId","data-v-4d0f58d9"]]);export{We as default};
