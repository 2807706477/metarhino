import{h as m,F as U,q as k,B as I,I as R,v as L,m as P,n as w,i as S,_ as O}from"./index.6eeff463.js";/* empty css               *//* empty css               *//* empty css              */import{d as T,r as c,u as V,c as $,aP as A,aK as C,F as j,aH as N,aT as u,aU as a,b3 as q,bx as H,bK as h,be as K,c5 as z,c6 as Y,bd as G,bN as J}from"./arco.31164f47.js";import{g as Q}from"./dept.08eae48a.js";import{I as W}from"./IconPicker.626a42e6.js";function ie(e){return e=U(e),m.get({url:"/system/account/getList",params:e},{errorMessageMode:"message"})}function X(){return m.get({url:"/system/account/getRole"},{errorMessageMode:"message"})}function Z(e){return e.password&&(e=Object.assign({},e,{password:k.exports(e.password)})),m.post({url:"/system/account/save",params:e},{errorMessageMode:"message"})}function x(e){return m.post({url:"/system/account/isaccountexist",params:e},{errorMessageMode:"message",isTransformResponse:!1})}function fe(e){return m.post({url:"/system/account/upStatus",params:e},{errorMessageMode:"message"})}function pe(e){return m.delete({url:"/system/account/del",params:e},{errorMessageMode:"message"})}const ee=T({name:"AddBook",components:{BasicModal:I,IconPicker:W,Icon:R},emits:["success"],setup(e,{emit:l}){const{t:_}=L.exports.useI18n(),i=c(!1),g=c([]),B=c([]),d=c(),s={id:0,name:"",nickname:"",dept_id:0,roleid:[],username:"",password:"",avatar:"",tel:"",mobile:"",email:"",address:"",city:"",remark:"",company:""},t=c(s),[F,{setModalProps:b,closeModal:v}]=P(async r=>{d.value?.resetFields(),b({confirmLoading:!1});const p=await X();p?g.value=p:g.value=[];const D=await Q(),n=[{id:0,name:"\u672A\u9009\u90E8\u95E8",pid:0}];D?B.value=n.concat(D):B.value=n,i.value=!!r?.isUpdate,V(i)?t.value=w(r.record):t.value=w(s)}),E=$(()=>V(i)?"\u7F16\u8F91\u7BA1\u7406\u8D26\u53F7":"\u65B0\u589E\u7BA1\u7406\u8D26\u53F7"),{loading:y,setLoading:f}=S();return{registerModal:F,getTitle:E,handleSubmit:async()=>{try{await d.value?.validate()||(f(!0),!V(i)&&t.value.password==""&&(t.value.password="123456"),A.loading({content:"\u63D0\u4EA4\u4E2D",id:"save",duration:0}),await Z(V(t)),A.success({content:"\u63D0\u4EA4\u6210\u529F",id:"save",duration:2e3}),v(),l("success"),f(!1))}catch{f(!1),A.error({content:"\u63D0\u4EA4\u5931\u8D25",id:"save",duration:1})}},formRef:d,loading:y,formData:t,roleList:g,deptList:B,t:_,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}],usernameRules:[{validator:(r,p)=>new Promise(async D=>{if(!r)p("\u8BF7\u586B\u5199\u767B\u5F55\u8D26\u53F7");else{let n={username:r};t.value.id>0&&(n=Object.assign({},n,{id:t.value.id}));const M=await x(n);M.code==1&&p(M.message)}D(!0)})}]}}});function ae(e,l,_,i,g,B){const d=H,s=h,t=K,F=z,b=Y,v=C("FormImageBox"),E=G,y=J,f=C("BasicModal");return j(),N(f,q(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u83DC\u5355",width:"900px",minHeight:500,title:e.getTitle,onOk:e.handleSubmit}),{default:u(()=>[a(y,{ref:"formRef",class:"form-content",model:e.formData,"auto-label-width":""},{default:u(()=>[a(E,{gutter:16},{default:u(()=>[a(t,{span:12},{default:u(()=>[a(s,{field:"name",label:"\u7528\u6237\u540D","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},{default:u(()=>[a(d,{modelValue:e.formData.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.formData.name=o),placeholder:"\u8BF7\u586B\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"nickname",label:"\u6635\u79F0","validate-trigger":"input"},{default:u(()=>[a(d,{modelValue:e.formData.nickname,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formData.nickname=o),placeholder:"\u8BF7\u586B\u5199\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{label:"\u9009\u62E9\u89D2\u8272",field:"roleid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]},{default:u(()=>[a(F,{placeholder:"\u9009\u62E9\u89D2\u8272",data:e.roleList,fieldNames:{key:"id",title:"name",children:"children"},multiple:"",modelValue:e.formData.roleid,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formData.roleid=o)},null,8,["data","modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"dept_id",label:"\u9009\u62E9\u90E8\u95E8"},{default:u(()=>[a(F,{placeholder:"\u9009\u62E9\u90E8\u95E8",data:e.deptList,fieldNames:{key:"id",title:"name",children:"children"},modelValue:e.formData.dept_id,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formData.dept_id=o)},null,8,["data","modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"username",label:"\u767B\u5F55\u8D26\u53F7",rules:e.usernameRules,"validate-trigger":["change","blur"]},{default:u(()=>[a(d,{modelValue:e.formData.username,"onUpdate:modelValue":l[4]||(l[4]=o=>e.formData.username=o),placeholder:"\u8BF7\u586B\u767B\u5F55\u8D26\u53F7"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"password",label:"\u767B\u5F55\u5BC6\u7801"},{default:u(()=>[a(d,{modelValue:e.formData.password,"onUpdate:modelValue":l[5]||(l[5]=o=>e.formData.password=o),placeholder:"\u767B\u5F55\u5BC6\u7801(\u4E0D\u4FEE\u6539\u5219\u4E3A\u7A7A\uFF0C\u9ED8\u8BA4\u5BC6\u7801123456)"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"mobile",label:"\u624B\u673A\u53F7\u7801"},{default:u(()=>[a(d,{modelValue:e.formData.mobile,"onUpdate:modelValue":l[6]||(l[6]=o=>e.formData.mobile=o),placeholder:"\u8BF7\u586B\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"tel",label:"\u5EA7\u673A"},{default:u(()=>[a(d,{modelValue:e.formData.tel,"onUpdate:modelValue":l[7]||(l[7]=o=>e.formData.tel=o),placeholder:"\u8BF7\u586B\u5EA7\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"email",label:"\u90AE\u7BB1"},{default:u(()=>[a(d,{modelValue:e.formData.email,"onUpdate:modelValue":l[8]||(l[8]=o=>e.formData.email=o),placeholder:"\u8BF7\u586B\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"address",label:"\u5730\u5740"},{default:u(()=>[a(d,{modelValue:e.formData.address,"onUpdate:modelValue":l[9]||(l[9]=o=>e.formData.address=o),placeholder:"\u8BF7\u586B\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"city",label:"\u57CE\u5E02"},{default:u(()=>[a(d,{modelValue:e.formData.city,"onUpdate:modelValue":l[10]||(l[10]=o=>e.formData.city=o),placeholder:"\u8BF7\u586B\u57CE\u5E02"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"company",label:"\u516C\u53F8"},{default:u(()=>[a(d,{modelValue:e.formData.company,"onUpdate:modelValue":l[11]||(l[11]=o=>e.formData.company=o),placeholder:"\u8BF7\u586B\u516C\u53F8"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"remark",label:"\u5907\u6CE8"},{default:u(()=>[a(b,{modelValue:e.formData.remark,"onUpdate:modelValue":l[12]||(l[12]=o=>e.formData.remark=o),placeholder:"\u8BF7\u586B\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),a(t,{span:12},{default:u(()=>[a(s,{field:"avatar",label:"\u5934\u50CF"},{default:u(()=>[a(v,{modelValue:e.formData.avatar,"onUpdate:modelValue":l[13]||(l[13]=o=>e.formData.avatar=o),placeholder:"\u8BF7\u9009\u62E9\u56FE\u7247"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const ue=O(ee,[["render",ae],["__scopeId","data-v-0c7aa7ca"]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{ue as A,ce as a,pe as d,ie as g,fe as u};
