import{h as c,B as ie,I as re,m as de,i as pe,n as G,_ as me}from"./index.afcd2e8c.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               */import{c as R,d as fe,r as n,u as W,aP as i,aK as x,F as d,aH as w,aT as t,aU as l,aW as r,aX as g,G as _,aY as T,aV as S,H as k,aI as ge,b3 as ce,b6 as Fe,be as ye,bm as ve,bd as be,bE as Be,c7 as Ee,c8 as Ce,bx as De,bK as Ae,c5 as Ve,bg as we,bf as _e,bN as Te,aO as ke,bq as Ie,br as Me}from"./arco.31164f47.js";import{a as he,b as Se,c as Ue}from"./devapi.52f58830.js";import{g as Oe}from"./common.bbd0496d.js";import{I as Le}from"./IconPicker.c662fd96.js";function ee(e){return c.get({url:"/apidoc/devapigroup/get_list",params:e},{errorMessageMode:"none"})}function Ne(){return c.get({url:"/apidoc/devapigroup/get_parent"},{errorMessageMode:"none"})}function $e(e){return c.post({url:"/apidoc/devapigroup/save",params:e},{errorMessageMode:"message"})}function Ge(e){return c.delete({url:"/apidoc/devapigroup/del",params:e},{errorMessageMode:"message"})}function X(e){return c.get({url:"/apidoc/devapitype/get_list",params:e},{errorMessageMode:"none"})}function ou(e){return c.get({url:"/apidoc/devapitype/get_typeinfo",params:e},{errorMessageMode:"none"})}function Re(e){return c.post({url:"/apidoc/devapitype/save",params:e},{errorMessageMode:"message"})}function Pe(e){return c.delete({url:"/apidoc/devapitype/del",params:e},{errorMessageMode:"message"})}const nu=R(()=>[{title:"\u5206\u7EC4",dataIndex:"groupname",width:100},{title:"\u63A5\u53E3\u540D\u79F0",dataIndex:"title",width:210},{title:"\u8BF7\u6C42\u5730\u5740",dataIndex:"url",width:290},{title:"\u8BF7\u6C42\u65B9\u5F0F",dataIndex:"method",width:100},{title:"token",dataIndex:"istoken",slotName:"istoken",width:100,align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",width:100,align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",width:120,align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:100,align:"center"}]),ze=R(()=>[{title:"\u5206\u7EC4\u540D\u79F0",dataIndex:"name"},{title:"\u63A5\u53E3\u7C7B\u578B",dataIndex:"typename"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),qe=R(()=>[{title:"\u7C7B\u578B\u540D\u79F0",dataIndex:"name"},{title:"\u8BF7\u6C42\u670D\u52A1\u5668\u5730\u5740",dataIndex:"rooturl"},{title:"\u52A0\u5BC6\u9A8C\u8BC1\u5B57\u7B26\u4E32",dataIndex:"verifyencrypt",align:"center"},{title:"\u662F\u5426\u662F\u672C\u7AEF",dataIndex:"isself",slotName:"isself",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),je=fe({name:"groupForm",components:{BasicModal:ie,IconPicker:Le,Icon:re},emits:["success"],setup(e,{emit:a}){const P=n(!1),U=n(!1),O=n([]),I=n(),b=n(),M=n([]),B=n([]),L=n([]),F=n([]),h={id:0,pid:0,type:"biz",name:"",type_id:0},m=n(h),E=n([]),[C,{setModalProps:s,closeModal:Y}]=de(async o=>{I.value?.resetFields(),P.value=!!o?.isUpdate,s({confirmLoading:!1}),f();const V=await Ne(),Z=[{id:0,name:"\u4E00\u7EA7\u5206\u7C7B",pid:0}];V?O.value=Z.concat(V):O.value=Z,M.value=await Oe({}),B.value=await he({}),L.value=await Se({})}),f=async()=>{E.value=await ee({})},y=R(()=>(W(P),"\u7BA1\u7406\u5206\u7C7B")),{loading:N,setLoading:v}=pe(),$=async()=>{try{await I.value?.validate()||(v(!0),i.loading({content:"\u63D0\u4EA4\u4E2D",id:"upStatus"}),await $e(W(m)),i.success({content:"\u63D0\u4EA4\u6210\u529F",id:"upStatus"}),v(!1),f())}catch{v(!1),i.clear("top")}},z=async()=>{U.value=!0,I.value?.resetFields(),(!p.value||p.value.length==0)&&(p.value=await X({})),p.value&&p.value.length>0&&(m.value.type_id=p.value[0].id),m.value=G(h)},q=async o=>{(!p.value||p.value.length==0)&&(p.value=await X({})),U.value=!0,m.value=G(o)},u=async o=>{try{i.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await Ge({ids:[o.id]})&&(E.value=await ee({}),i.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{i.clear("top")}},D=n(!1),j=n(!1),J={id:0,name:"",rooturl:"",model_name:"",verifyencrypt:"",isself:0,user_tablename:"",user_id:"",login_url:""},A=n(J),p=n([]),ue=()=>{D.value=!0,H()},H=async()=>{p.value=await X({})},ae=()=>{j.value=!0,b.value?.resetFields(),A.value=G(J)},te=o=>{j.value=!0,A.value=G(o)},le=async()=>{try{await b.value?.validate()||(i.loading({content:"\u63D0\u4EA4\u4E2D",id:"upStatus"}),await Re(W(A)),i.success({content:"\u63D0\u4EA4\u6210\u529F",id:"upStatus"}),H())}catch{i.clear("top")}},oe=async o=>{try{i.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await Pe({ids:[o.id]})&&(H(),i.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{i.clear("top")}},ne=o=>{A.value.user_tablename?o&&Q(""):i.warning("\u8BF7\u5148\u9009\u62E9\u7528\u6237\u6570\u636E\u5E93")},se=o=>{Q(o)},K=n(!1),Q=async o=>{K.value=!0,F.value=await Ue({tablename:A.value.user_tablename,seachword:o}),K.value=!1};return{registerModal:C,getTitle:y,handleSubmit:$,formRef:I,loading:N,formData:m,prantList:O,renderData:E,groupcolumns:ze,handleCreate:z,handleEdit:q,handleDel:u,GroupVisible:U,handleType:ue,TypeVisible:D,typecolumns:qe,AddTypeVisible:j,typeForm:A,typeformRef:b,TypeList:p,handleCreateType:ae,handleTypeEdit:te,handleTypeSubmit:le,handleTypeDel:oe,tablelist:M,routerlist:B,modellist:L,userlist:F,onSelectUserList:ne,handleSearch:se,userloading:K}}});const He={class:"titlebox"},Ke={class:"right"},We={class:"talbe-modal"};function Xe(e,a,P,U,O,I){const b=Fe,M=ye,B=ve,L=be,F=x("Icon"),h=Be,m=Ee,E=Ce,C=De,s=Ae,Y=Ve,f=we,y=_e,N=Te,v=ke,$=Ie,z=Me,q=x("BasicModal");return d(),w(q,ce(e.$attrs,{onRegister:e.registerModal,loading:e.loading,footer:!1,helpMessage:"\u63A5\u53E3\u5206\u7C7B",width:"900px",minHeight:600,title:e.getTitle,onOk:e.handleSubmit}),{default:t(()=>[l(L,{style:{"margin-bottom":"1px"}},{default:t(()=>[l(M,{span:12},{default:t(()=>[l(b)]),_:1}),l(M,{span:12,style:{"text-align":"right","padding-bottom":"2px"}},{default:t(()=>[l(b,null,{default:t(()=>[l(B,{type:"primary",onClick:e.handleCreate},{default:t(()=>[...a[17]||(a[17]=[r("\u65B0\u589E\u5206\u7EC4",-1)])]),_:1},8,["onClick"]),l(B,{type:"primary",onClick:e.handleType},{default:t(()=>[...a[18]||(a[18]=[r("\u63A5\u53E3\u7C7B\u578B\u914D\u7F6E(\u5C0F\u7A0B\u5E8F)",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),l(E,{"row-key":"id",loading:e.loading,pagination:!1,columns:e.groupcolumns,data:e.renderData,bordered:{wrapper:!0,cell:!0},size:"large","default-expand-all-rows":!0,ref:"artable"},{status:t(({record:u})=>[r(g(u.status==0?"\u6B63\u5E38":"\u672A\u542F\u7528"),1)]),operations:t(({record:u})=>[l(F,{icon:"svgfont-bianji1",class:"iconbtn",onClick:D=>e.handleEdit(u),size:18,color:"#0960bd"},null,8,["onClick"]),l(h,{direction:"vertical"}),l(m,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:D=>e.handleDel(u)},{default:t(()=>[l(F,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])]),_:1},8,["loading","columns","data"]),l(v,{visible:e.GroupVisible,"onUpdate:visible":a[3]||(a[3]=u=>e.GroupVisible=u),onCancel:a[4]||(a[4]=u=>e.GroupVisible=!1),onOk:e.handleSubmit,closable:!1},{default:t(()=>[l(N,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:t(()=>[l(s,{field:"name",label:"\u5206\u7C7B\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5206\u7C7B\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:t(()=>[l(C,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=u=>e.formData.name=u),placeholder:"\u8BF7\u586B\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{field:"pid",label:"\u9009\u62E9\u4E0A\u7EA7",style:{"margin-bottom":"15px"}},{default:t(()=>[l(Y,{placeholder:"\u9009\u62E9\u4E0A\u7EA7",data:e.prantList,fieldNames:{key:"id",title:"name",children:"children"},modelValue:e.formData.pid,"onUpdate:modelValue":a[1]||(a[1]=u=>e.formData.pid=u)},null,8,["data","modelValue"])]),_:1}),l(s,{field:"type_id",label:"\u63A5\u53E3\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u63A5\u53E3\u7C7B\u578B"}],style:{"margin-bottom":"15px"}},{extra:t(()=>[...a[19]||(a[19]=[r(" \u4F7F\u7528\u63A5\u53E3\u7AEF\uFF0C\u5982B\u7AEF\u540E\u53F0\uFF0C\u5C0F\u7A0B\u5E8F\uFF0C\u5FAE\u4FE1\u516C\u8D26\u53F7\u7B49 ",-1)])]),default:t(()=>[l(y,{modelValue:e.formData.type_id,"onUpdate:modelValue":a[2]||(a[2]=u=>e.formData.type_id=u),placeholder:"\u8BF7\u9009\u62E9\u63A5\u53E3\u7C7B\u578B"},{default:t(()=>[(d(!0),_(T,null,S(e.TypeList,u=>(d(),w(f,{value:u.id,label:u.name},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","onOk"]),l(v,{visible:e.TypeVisible,"onUpdate:visible":a[5]||(a[5]=u=>e.TypeVisible=u),onCancel:a[6]||(a[6]=u=>e.TypeVisible=!1),onOk:e.handleSubmit,closable:!1,width:"800px"},{title:t(()=>[k("div",He,[a[21]||(a[21]=k("div",{class:"left"},"\u7C7B\u578B\u7BA1\u7406",-1)),k("div",Ke,[l(B,{type:"primary",onClick:e.handleCreateType},{default:t(()=>[...a[20]||(a[20]=[r("\u65B0\u589E",-1)])]),_:1},8,["onClick"])])])]),default:t(()=>[k("div",We,[l(E,{"row-key":"id",pagination:!1,columns:e.typecolumns,data:e.TypeList,bordered:{wrapper:!0,cell:!0},"default-expand-all-rows":!0},{isself:t(({record:u})=>[r(g(u.isself==0?"\u5426":"\u662F"),1)]),operations:t(({record:u})=>[l(F,{icon:"svgfont-bianji1",class:"iconbtn",onClick:D=>e.handleTypeEdit(u),size:18,color:"#0960bd"},null,8,["onClick"]),l(h,{direction:"vertical"}),l(m,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:D=>e.handleTypeDel(u)},{default:t(()=>[l(F,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])]),_:1},8,["columns","data"])])]),_:1},8,["visible","onOk"]),l(v,{visible:e.AddTypeVisible,"onUpdate:visible":a[15]||(a[15]=u=>e.AddTypeVisible=u),onCancel:a[16]||(a[16]=u=>e.AddTypeVisible=!1),width:"700px",onOk:e.handleTypeSubmit,closable:!1},{default:t(()=>[l(N,{ref:"typeformRef",model:e.typeForm,"auto-label-width":""},{default:t(()=>[l(s,{field:"name",label:"\u7C7B\u578B\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7C7B\u578B\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:t(()=>[l(C,{modelValue:e.typeForm.name,"onUpdate:modelValue":a[7]||(a[7]=u=>e.typeForm.name=u),placeholder:"\u8BF7\u586B\u7C7B\u578B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{field:"isself",label:"\u662F\u5426\u4E3A\u672C\u7AEF\u63A5\u53E3",style:{"margin-bottom":"15px"}},{extra:t(()=>[...a[22]||(a[22]=[r(" \u5728\u5F53\u524D\u4E1A\u52A1\u7AEF\u4F7F\u7528\u7684\u63A5\u53E3\uFF0C\u5C31\u63A5\u53E3\u6587\u6863\u6240\u5728\u5E94\u7528\u3002 ",-1)])]),default:t(()=>[l(z,{modelValue:e.typeForm.isself,"onUpdate:modelValue":a[8]||(a[8]=u=>e.typeForm.isself=u)},{default:t(()=>[l($,{value:0},{default:t(()=>[...a[23]||(a[23]=[r("\u5426",-1)])]),_:1}),l($,{value:1},{default:t(()=>[...a[24]||(a[24]=[r("\u662F",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.typeForm.isself==0?(d(),_(T,{key:0},[l(s,{field:"rooturl",label:"\u8BF7\u6C42\u670D\u52A1\u5668","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BF7\u6C42\u670D\u52A1\u5668\u5730\u5740"}],style:{"margin-bottom":"15px"}},{default:t(()=>[l(C,{modelValue:e.typeForm.rooturl,"onUpdate:modelValue":a[9]||(a[9]=u=>e.typeForm.rooturl=u),placeholder:"\u8BF7\u586B\u8BF7\u6C42\u670D\u52A1\u5668\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(s,{field:"verifyencrypt",label:"\u8BF7\u6C42\u9A8C\u8BC1\u5B57\u7B26\u4E32","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[l(C,{modelValue:e.typeForm.verifyencrypt,"onUpdate:modelValue":a[10]||(a[10]=u=>e.typeForm.verifyencrypt=u),placeholder:"\u8BF7\u586B\u8BF7\u6C42\u9A8C\u8BC1\u5B57\u7B26\u4E32"},null,8,["modelValue"])]),_:1}),l(s,{field:"model_name",label:"\u6A21\u5757\u76EE\u5F55",extra:"\u7528\u4E8E\u516C\u5171\u63A5\u53E3\u6A21\u5757\u8BF7\u6C42","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[l(y,{modelValue:e.typeForm.model_name,"onUpdate:modelValue":a[11]||(a[11]=u=>e.typeForm.model_name=u),placeholder:"\u8BF7\u9009\u62E9\u6A21\u5757\u76EE\u5F55","allow-search":"","allow-clear":""},{default:t(()=>[(d(!0),_(T,null,S(e.modellist,u=>(d(),w(f,{value:u},{default:t(()=>[r(g(u),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(s,{field:"user_tablename",label:"\u6388\u6743\u7528\u6237\u6570\u636E\u8868\u540D",extra:"\u7528\u4E8E\u6D4B\u8BD5\u7684\u7528\u6237\u8D26\u53F7\u6240\u5728\u7684\u8868\uFF1Abusiness_wxsys_user","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[l(y,{modelValue:e.typeForm.user_tablename,"onUpdate:modelValue":a[12]||(a[12]=u=>e.typeForm.user_tablename=u),placeholder:"\u8BF7\u586B\u6570\u636E\u8868\u540D(\u9009\u586B)","allow-search":"","allow-clear":""},{label:t(({data:u})=>[k("span",null,g(u?.value),1)]),default:t(()=>[(d(!0),_(T,null,S(e.tablelist,u=>(d(),w(f,{value:u.name},{default:t(()=>[r(g(u.name+" "+u.title),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(s,{field:"user_tablename",label:"\u83B7\u53D6\u6D4B\u8BD5\u7528\u6237",extra:"\u83B7\u53D6\u8981\u6D4B\u8BD5\u7528\u6237","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[l(y,{modelValue:e.typeForm.user_id,"onUpdate:modelValue":a[13]||(a[13]=u=>e.typeForm.user_id=u),placeholder:"\u8BF7\u9009\u62E9\u7528\u6237\u6570\u636E",onPopupVisibleChange:e.onSelectUserList,loading:e.userloading,onSearch:e.handleSearch,"allow-search":"","allow-clear":""},{default:t(()=>[(d(!0),_(T,null,S(e.userlist,u=>(d(),w(f,{value:u.id},{default:t(()=>[r(g("ID:"+u.id+" - "+u.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue","onPopupVisibleChange","loading","onSearch"])]),_:1}),l(s,{field:"login_url",label:"\u767B\u5F55\u8BF7\u6C42\u63A5\u53E3",extra:"\u7528\u4E8E\u6D4B\u8BD5\u767B\u5F55\u8BF7\u6C42\u63A5\u53E3\u5730\u5740\uFF0C\u65B9\u6CD5\u540D\u7EDF\u4E00\u4E3A\uFF1Aget_apitoken","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[l(y,{modelValue:e.typeForm.login_url,"onUpdate:modelValue":a[14]||(a[14]=u=>e.typeForm.login_url=u),placeholder:"\u8BF7\u586B\u6570\u636E\u8868\u540D(\u9009\u586B)","allow-search":"","allow-clear":""},{label:t(({data:u})=>[k("span",null,g(u?.value),1)]),default:t(()=>[(d(!0),_(T,null,S(e.routerlist,u=>(d(),w(f,{value:u},{default:t(()=>[r(g(u),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})],64)):ge("",!0)]),_:1},8,["model"])]),_:1},8,["visible","onOk"])]),_:1},16,["onRegister","loading","title","onOk"])}const Ye=me(je,[["render",Xe],["__scopeId","data-v-f03d9f2d"]]),su=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));export{Ye as G,su as a,nu as c,ou as g};
