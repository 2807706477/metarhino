import{h as F,B as M,i as C,m as y,n as D,_ as A}from"./index.ec13b3f4.js";/* empty css               *//* empty css               *//* empty css              */import{d as k,r as i,u as v,c as U,aP as h,aK as R,F as T,aH as H,aT as t,H as c,aU as a,b3 as L,bx as O,bK as S,be as $,c5 as I,bC as N,br as P,c6 as j,bd as q,bN as z}from"./arco.31164f47.js";function K(e){return F.get({url:"/mmcode/spotcate/getTree",params:e},{errorMessageMode:"message"})}function Y(e){return F.post({url:"/mmcode/spotcate/save",params:e},{errorMessageMode:"message"})}function se(e){return F.delete({url:"/mmcode/spotcate/del",params:e},{errorMessageMode:"message"})}const G=k({name:"CateForm",components:{BasicModal:M},emits:["success"],setup(e,{emit:l}){const m=i(!1),w=i(350),p=i([]),{loading:E,setLoading:r}=C(),s=i(),u={id:0,name:"",pid:0,status:0,weigh:1,remark:""},d=i(u),[f,{setModalProps:g,closeModal:_}]=y(async n=>{s.value?.resetFields(),r(!0),g({confirmLoading:!1});const o=await K({}),V=[{id:0,name:"\u4E00\u7EA7\u6570\u636E"}];o?p.value=V.concat(o):p.value=V,m.value=!!n?.isUpdate,v(m)?(n.record.children&&delete n.record.children,d.value=D(n.record)):(d.value=D(u),d.value.pid=n.record.pid),r(!1)}),b=U(()=>v(m)?"\u7F16\u8F91\u6570\u636E":"\u65B0\u589E\u6570\u636E");return{registerModal:f,getTitle:b,handleSubmit:async()=>{try{if(!await s.value?.validate()){r(!0),h.loading({content:"\u63D0\u4EA4\u4E2D",id:"submit",duration:0});let o=D(v(d));await Y(o),h.success({content:"\u63D0\u4EA4\u6210\u529F",id:"submit",duration:2e3}),_(),l("success"),r(!1)}}catch{r(!1),h.loading({content:"\u63D0\u4EA4\u4E2D",id:"submit",duration:1})}},formRef:s,loading:E,formData:d,OYoptions:[{label:"\u6B63\u5E38",value:0},{label:"\u7981\u7528",value:1}],modelHeight:w,treeList:p}}});const J={class:"addFormbox"},Q={class:"tabs-content"},W={class:"content_box"},X={class:"besecontent"};function Z(e,l,m,w,p,E){const r=O,s=S,u=$,d=I,f=N,g=P,_=j,b=q,B=z,n=R("BasicModal");return T(),H(n,L(e.$attrs,{onRegister:e.registerModal,isPadding:!1,loading:e.loading,width:"600px",minHeight:e.modelHeight,title:e.getTitle,onOk:e.handleSubmit}),{default:t(()=>[c("div",J,[c("div",Q,[a(B,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:t(()=>[c("div",W,[c("div",X,[a(b,{gutter:16},{default:t(()=>[a(u,{span:22},{default:t(()=>[a(s,{field:"name",label:"\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u4EA4\u6613\u6240\u540D\u79F0"}]},{default:t(()=>[a(r,{modelValue:e.formData.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.formData.name=o),placeholder:"\u540D\u79F0","max-length":50,"allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:22},{default:t(()=>[a(s,{field:"pid",label:"\u4E0A\u7EA7","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u4EA4\u6613\u6240\u540D\u79F0"}]},{default:t(()=>[a(d,{placeholder:"\u9009\u62E9\u4E0A\u7EA7",data:e.treeList,modelValue:e.formData.pid,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formData.pid=o),"allow-search":"",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["data","modelValue"])]),_:1})]),_:1}),a(u,{span:11},{default:t(()=>[a(s,{field:"weigh",label:"\u6392\u5E8F","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[a(f,{modelValue:e.formData.weigh,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formData.weigh=o),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(s,{field:"status",label:"\u72B6\u6001",style:{"margin-bottom":"5px"}},{default:t(()=>[a(g,{modelValue:e.formData.status,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formData.status=o),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1}),a(u,{span:22},{default:t(()=>[a(s,{field:"remark",label:"\u5907\u6CE8",style:{"margin-bottom":"15px"}},{default:t(()=>[a(_,{modelValue:e.formData.remark,"onUpdate:modelValue":l[4]||(l[4]=o=>e.formData.remark=o),placeholder:"\u8BF7\u586B\u5907\u6CE8","max-length":200,"allow-clear":"","show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:22},{default:t(()=>[a(s,{field:"api_domain",label:"\u57DF\u540D"},{default:t(()=>[a(r,{modelValue:e.formData.api_domain,"onUpdate:modelValue":l[5]||(l[5]=o=>e.formData.api_domain=o),placeholder:"\u8BF7\u586B\u57DF\u540D","max-length":50,"allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])])]),_:1},8,["model"])])])]),_:1},16,["onRegister","loading","minHeight","title","onOk"])}const x=A(G,[["render",Z],["__scopeId","data-v-5898f753"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as C,ue as a,se as d,K as g};
