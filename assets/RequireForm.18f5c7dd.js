import{h as S,B as L,M as I,p as N,m as P,i as T,n as z,_ as O}from"./index.afcd2e8c.js";/* empty css               *//* empty css               */import{d as Y,r as l,c as G,u as C,aP as b,aK as V,F as B,aH as J,aT as u,H as r,J as g,G as D,aY as X,aV as j,I as H,aX as Q,aI as W,aU as a,b2 as y,bv as M,b3 as Z,bx as x,bK as ee,be as ae,c6 as oe,bd as te,bk as ue,bN as le}from"./arco.31164f47.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";function se(e,t){return S.post({url:"/developer/codestore/requirement?baseurl="+t,params:e},{errorMessageMode:"message"})}const ne=Y({name:"AddBook",components:{BasicModal:L,Editor:I},emits:["success"],setup(e,{emit:t}){const[E,{openModal:U}]=N(),_=l(!1),w=l([]),i=l(!0),s=l(!1),n=l(1),v=l(620),f=l(620),c=l(),h=l({id:0,cid:0,content:"",code_token:"",title:"",name:"",des:"",customer:"",mobile:"",wx:"",price:"",attachment:[],createtime:0}),m=l(h.value),p=l(),o=l(""),[k,{setModalProps:q,closeModal:A}]=P(async d=>{c.value?.resetFields(),n.value=1,q({confirmLoading:!1}),s.value=!!d?.isUpdate,m.value.code_token=d.record.code_token,o.value=d.record.domian,p.value&&p.value.setVal("")}),R=G(()=>C(s)?"\u7F16\u8F91\u6570\u636E":"\u53D1\u5E03\u9700\u6C42"),{loading:$,setLoading:F}=T();return{registerModal:k,getTitle:R,handleSubmit:async()=>{try{if(!await c.value?.validate()){F(!0),b.loading({content:"\u63D0\u4EA4\u4E2D",id:"requirement",duration:0});let K=z(C(m));await se(K,o.value),b.success({content:"\u63D0\u4EA4\u6210\u529F",id:"requirement",duration:2e3}),A(),t("success"),F(!1)}}catch{F(!1),b.loading({content:"\u63D0\u4EA4\u4E2D",id:"requirement",duration:1})}},formRef:c,loading:$,formData:m,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}],SHoptions:[{label:"\u6B63\u5E38",value:0},{label:"\u7981\u7528",value:1}],tapList:[{id:1,name:"\u9700\u6C42\u4FE1\u606F"},{id:2,name:"\u9700\u6C42\u5185\u5BB9"}],activeKey:n,handleEditUpdta:d=>{m.value.content=d},modelHeight:v,editorRef:p,onHeightChange:d=>{f.value=d},windHeight:f,isEditor:i,cateList:w,registerFileModal:E,visibleimage:_}}});const de={key:0,class:"tabs-header"},ie={class:"tabs-nav-wrap"},re=["onClick"],me={class:"label"},ce={class:"content_box"},pe={class:"besecontent"};function fe(e,t,E,U,_,w){const i=x,s=ee,n=ae,v=oe,f=te,c=ue,h=V("Editor"),m=le,p=V("BasicModal");return B(),J(p,Z(e.$attrs,{onRegister:e.registerModal,isPadding:!1,loading:e.loading,width:"1000px",onHeightChange:e.onHeightChange,minHeight:e.modelHeight,title:e.getTitle,onOk:e.handleSubmit}),{default:u(()=>[r("div",{class:"addFormbox",style:g({"min-height":`${e.windHeight}px`})},[e.isEditor?(B(),D("div",de,[r("div",ie,[(B(!0),D(X,null,j(e.tapList,o=>(B(),D("div",{class:H(["tap_item",{item_active:e.activeKey==o.id}]),onClick:()=>{e.activeKey=o.id}},[r("div",me,Q(o.name),1)],10,re))),256))]),r("div",{class:"tabs-bar",style:g({top:`${(e.activeKey-1)*64}px`,height:"64px"})},null,4)])):W("",!0),r("div",{class:H(["tabs-content",{addpadding:!e.isEditor}])},[a(m,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:u(()=>[r("div",ce,[y(a(c,{style:g([{overflow:"auto"},{height:`${e.windHeight}px`}])},{default:u(()=>[r("div",pe,[a(f,{gutter:16},{default:u(()=>[a(n,{span:24},{default:u(()=>[a(s,{field:"title",label:"\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6807\u9898"}]},{default:u(()=>[a(i,{modelValue:e.formData.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.formData.title=o),placeholder:"\u8BF7\u586B\u6807\u9898","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:24},{default:u(()=>[a(s,{field:"des",label:"\u8BF4\u660E",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BF4\u660E"}]},{default:u(()=>[a(v,{modelValue:e.formData.des,"onUpdate:modelValue":t[1]||(t[1]=o=>e.formData.des=o),placeholder:"\u8BF7\u586B\u8BF4\u660E","auto-size":{minRows:3,maxRows:5},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:u(()=>[a(s,{field:"name",label:"\u9650\u5B9A\u5305\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u9650\u5B9A\u5305\u540D"}]},{default:u(()=>[a(i,{modelValue:e.formData.name,"onUpdate:modelValue":t[2]||(t[2]=o=>e.formData.name=o),placeholder:"\u8BF7\u586B\u9650\u5B9A\u5305\u540D,\u5B89\u88C5\u662F\u4EE3\u7801\u5305\u540D(\u4EE5\u5B57\u6BCD\u3001\u6570\u5B57\u547D\u540D)","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:u(()=>[a(s,{field:"price",label:"\u9884\u7B97\u91D1\u989D",rules:[{required:!0,message:"\u8BF7\u586B\u4EF7\u683C"}]},{default:u(()=>[a(i,{modelValue:e.formData.price,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.price=o),placeholder:"\u8BF7\u586B\u4EF7\u683C","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:u(()=>[a(s,{field:"customer",label:"\u8054\u7CFB\u4EBA",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA"}]},{default:u(()=>[a(i,{modelValue:e.formData.customer,"onUpdate:modelValue":t[4]||(t[4]=o=>e.formData.customer=o),placeholder:"\u8BF7\u586B\u8054\u7CFB\u4EBA","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:u(()=>[a(s,{field:"mobile",label:"\u8054\u7CFB\u7535\u8BDD",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8054\u7CFB\u7535\u8BDD"}]},{default:u(()=>[a(i,{modelValue:e.formData.mobile,"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.mobile=o),placeholder:"\u8BF7\u586B\u8054\u7CFB\u7535\u8BDD","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,{span:12},{default:u(()=>[a(s,{field:"wx",label:"\u5FAE\u4FE1"},{default:u(()=>[a(i,{modelValue:e.formData.wx,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.wx=o),placeholder:"\u8BF7\u586B\u5FAE\u4FE1","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["style"]),[[M,e.activeKey==1]]),y(r("div",{class:"hcontent",style:g({height:`${e.windHeight}px`})},[a(h,{minHeight:e.windHeight,ref:"editorRef",onUpdata:e.handleEditUpdta},null,8,["minHeight","onUpdata"])],4),[[M,e.activeKey==2]])])]),_:1},8,["model"])],2)],4)]),_:1},16,["onRegister","loading","onHeightChange","minHeight","title","onOk"])}const we=O(ne,[["render",fe],["__scopeId","data-v-7c006202"]]);export{we as default};
