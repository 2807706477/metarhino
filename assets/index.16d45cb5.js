import{p as G,i as ye,x as ke,I as v,_ as Fe}from"./index.ec13b3f4.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{c as Ee,d as ze,r as l,j as Be,o as De,w as Ie,aK as f,F as d,G as F,aU as n,aT as o,H as s,I as E,u as i,aH as m,aY as Se,aX as z,aW as C,aI as W,n as X,aP as h,aO as Ve,bh as Ae,ba as Te,cd as Pe,bx as Me,b6 as Ne,bm as Re,bT as $e,bE as Ue,c7 as je,c8 as Le,ce as Oe}from"./arco.31164f47.js";import{A as He,g as Ge,d as We}from"./AddForm.0b757153.js";import{C as Xe,g as Ye,d as qe}from"./CateForm.635ad19a.js";import{t as Je}from"./index.d745e15c.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import"./common.106b221b.js";const Y=Ee(()=>[{title:"\u5206\u7C7Bid",dataIndex:"cidName",align:"left",width:100},{title:"\u89C6\u9891\u5C01\u9762",dataIndex:"cover_url",slotName:"des",align:"left",width:280},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"createtime",align:"left",width:120},{title:"\u6587\u4EF6\u5927\u5C0F",dataIndex:"filesize",align:"left",width:100},{title:"ID",dataIndex:"id",align:"left",width:80},{title:"\u9AD8\u5EA6",dataIndex:"imageheight",align:"left",width:190},{title:"\u5BBD\u5EA6",dataIndex:"imagewidth",align:"left",width:190},{title:"\u72B6\u60011=\u7981\u7528",dataIndex:"status",slotName:"status",align:"left",width:100},{title:"\u6587\u4EF6\u540D\u79F0",dataIndex:"title",align:"left",width:190},{title:"\u6392\u5E8F",dataIndex:"weigh",align:"left",width:100},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",fixed:"right",width:100,align:"center"}]),Qe={class:"container"},Ze={class:"split-menu"},Ke={class:"list-header-wrapper"},et={class:"list-header"},tt={class:"collapse-root"},at={class:"tablebox"},nt={class:"scrollbarcontainer"},ot={class:"titleBox"},st={key:1,class:"titleBox"},lt={class:"tigmenu"},it=["onClick"],ut=["onClick"],ct={class:"optional-operation-wrapper"},dt={class:"flex-page contentbox"},rt={class:"custom-full-table"},pt={class:"search-field"},vt={class:"search-btn"},gt={class:"search-option"},mt={class:"table-container"},_t={name:"picture"},ft=ze({..._t,setup(ht){const P=l("205px"),[q,{openModal:M}]=G(),[J,{openModal:N}]=G(),x=l(null),w=l([]),B=l([0]),D=l(0),Q=async a=>{B.value=a,c.value.cid=a[0],X(()=>{p()}),D.value!=a[0]?(x.value?.expandNode(a,!0),D.value=a[0]):(x.value?.expandNode(a,!1),D.value=0)},r=Be({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:Z,setLoading:y}=ye(!0),R=l([]),I=l([]),$=l(!1),U=l("large"),j=()=>({cid:0,name:"",title:""}),c=l(j()),p=async()=>{y(!0);try{const a=await Ge({page:r.current,pageSize:r.pageSize,...c.value});R.value=a.items,r.current=a.page,r.total=a.total}catch{}finally{y(!1)}},S=async a=>{const e=await Ye({}),g=[{key:0,name:"\u5168\u90E8\u6570\u636E"}];e?w.value=g.concat(e):w.value=g,a!=1&&(y(!1),w.value&&w.value.length>0&&X(()=>{y(!0),p()}))},V=l(null),_=l(!1),b=l(!1);De(()=>{S(0),L(),window.onresize=()=>{L()}});const L=()=>{V.value&&(V.value.offsetHeight>40?b.value=!0:(b.value=!1,_.value=!1))},K=()=>{r.current=1,p()},ee=()=>{r.current=1,c.value=j(),p()};Ie(()=>Y.value,a=>{I.value=ke(a)},{deep:!0,immediate:!0});const te=()=>{M(!0,{isUpdate:!1,record:null})},ae=async a=>{M(!0,{isUpdate:!0,record:a})},ne=async()=>{r.current=1,p()},oe=a=>{r.current=a,p()},se=a=>{r.pageSize=a,p()},le=async a=>{try{h.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await We({ids:[a.id]}),p(),h.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{h.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}},k=l(!0);function ie(){k.value=!k.value,x.value?.expandAll(k.value)}const O=a=>{N(!0,{isUpdate:!1,record:{pid:a}})},ue=a=>{N(!0,{isUpdate:!0,record:a})},ce=async a=>{Ve.warning({title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5185\u5BB9\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{try{h.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await qe({ids:[a]})&&(S(0),c.value.cid==a&&(c.value.cid=0,B.value=[0]),h.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3}))}catch{h.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}}})};return(a,e)=>{const g=Ae,de=f("IconDown"),re=Te,pe=Pe,A=Me,H=Ne,ve=f("icon-up"),ge=f("icon-down"),T=Re,me=f("icon-search"),_e=$e,fe=f("cell-tag"),he=Ue,we=je,be=Le,Ce=Oe,xe=f("page-card");return d(),F("div",Qe,[n(xe,{breadcrumb:"",isFullscreen:$.value},{default:o(()=>[n(Ce,{style:{width:"100%",height:"100%"},size:P.value,"onUpdate:size":e[9]||(e[9]=t=>P.value=t)},{"resize-trigger":o(()=>[...e[11]||(e[11]=[s("div",{class:"resizebox-line toggle-list"},[s("div",{class:"resizebox-line-icon"})],-1)])]),first:o(()=>[s("div",Ze,[s("div",Ke,[s("div",et,[e[12]||(e[12]=s("span",{class:"catalogue-title"},"\u5206\u7C7B\u7BA1\u7406",-1)),s("div",tt,[s("span",{class:E(["header-operation",`collapse-toggle-${k.value?"down":"up"}`]),onClick:e[0]||(e[0]=()=>{ie()})},null,2)]),n(g,{content:"\u65B0\u5EFA\u5206\u7C7B"},{default:o(()=>[n(i(v),{class:"addicon",onClick:e[1]||(e[1]=t=>O(0)),icon:"icon-plus-circle-fill",size:29,color:"#055fe6"})]),_:1})])]),s("div",at,[s("div",nt,[n(pe,{blockNode:!0,data:w.value,"show-line":!0,ref_key:"treeRef",ref:x,"selected-keys":B.value,onSelect:Q},{"switcher-icon":o((t,{isLeaf:u})=>[u?(d(),F(Se,{key:1},[t.key!=0?(d(),m(i(v),{key:0,class:"yuandian",icon:"svgfont-yuandian2",size:15})):(d(),m(i(v),{key:1,class:"yuandian",icon:"svgfont-home",size:15}))],64)):(d(),m(de,{key:0}))]),title:o(t=>[t.name.length>=8?(d(),m(g,{key:0,content:t.name,"background-color":"#4e5969"},{default:o(()=>[s("span",ot,z(t.name),1)]),_:2},1032,["content"])):(d(),F("span",st,z(t.name),1))]),extra:o(t=>[t.key!=0?(d(),F("span",{key:0,class:E(["page-tree-tool",{"page-tree-tool-active":t.showbtn}])},[n(re,{position:"br",trigger:"click","popup-visible":t.showbtn,onPopupVisibleChange:u=>t.showbtn=u},{content:o(()=>[s("div",lt,[s("div",{class:"item",onClick:u=>ue(t)},[n(i(v),{class:"bicon",icon:"svgfont-bianji1",size:13}),e[13]||(e[13]=C(" \u7F16\u8F91",-1))],8,it),s("div",{class:"item delete",onClick:u=>ce(t.id)},[n(i(v),{class:"bicon",icon:"svgfont-icon7",size:13}),e[14]||(e[14]=C(" \u5220\u9664",-1))],8,ut)])]),default:o(()=>[n(i(v),{class:"unicon page-tree-menu-button",icon:"svgfont-gengduo",size:13})]),_:2},1032,["popup-visible","onPopupVisibleChange"]),s("span",ct,[n(g,{content:"\u521B\u5EFA\u5B50\u6570\u636E"},{default:o(()=>[n(i(v),{class:"unicon",onClick:u=>O(t.id),icon:"svgfont-jia",size:12},null,8,["onClick"])]),_:2},1024)])],2)):W("",!0)]),_:1},8,["data","selected-keys"])])])])]),second:o(()=>[s("div",dt,[s("div",rt,[s("div",{class:E(["search-row",{unhasesearchbtn:!b.value,hasesearchbtn:b.value}])},[s("div",pt,[s("div",{class:E(["search-line search-drown",{searchdowncss:_.value}])},[s("div",{class:"search-drown-box",ref_key:"searchRef",ref:V},[n(H,{wrap:""},{default:o(()=>[n(A,{style:{width:"120px"},modelValue:c.value.cid,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value.cid=t),placeholder:"\u8F93\u5165\u5206\u7C7Bid","allow-clear":""},null,8,["modelValue"]),n(A,{style:{width:"120px"},modelValue:c.value.name,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value.name=t),placeholder:"\u8F93\u5165\u9644\u4EF6\u539F\u6765\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),n(A,{style:{width:"120px"},modelValue:c.value.title,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value.title=t),placeholder:"\u8F93\u5165\u6587\u4EF6\u540D\u79F0","allow-clear":""},null,8,["modelValue"])]),_:1})],512)],2)]),s("div",vt,[n(H,null,{default:o(()=>[n(g,{mini:"",content:_.value?"\u6536\u8D77\u67E5\u8BE2\u6761\u4EF6":"\u5C55\u5F00\u67E5\u8BE2\u6761\u4EF6"},{default:o(()=>[b.value?(d(),m(T,{key:0,onClick:e[5]||(e[5]=t=>_.value=!_.value)},{icon:o(()=>[_.value?(d(),m(ve,{key:0})):(d(),m(ge,{key:1}))]),_:1})):W("",!0)]),_:1},8,["content"]),n(T,{type:"primary",onClick:K},{icon:o(()=>[n(me)]),default:o(()=>[e[15]||(e[15]=C(" \u67E5\u8BE2 ",-1))]),_:1}),n(T,{onClick:ee},{default:o(()=>[C(z(a.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),s("div",gt,[n(i(Je),{showbtn:["create","refresh","selectdensity","settingcolumn","fullscreen"],columns:i(Y),disabledColumnKeys:["id"],onCreate:te,onRefresh:p,onSelectdensity:e[6]||(e[6]=t=>U.value=t),onFullscreen:e[7]||(e[7]=t=>$.value=t),onSettingcolumn:e[8]||(e[8]=t=>I.value=t)},null,8,["columns"])])],2),s("div",mt,[n(be,{"row-key":"id",loading:i(Z),pagination:r,columns:I.value,data:R.value,bordered:{wrapper:!0,cell:!0},size:U.value,"default-expand-all-rows":!0,ref:"artable",scroll:{x:"100%",y:"100%"},onPageChange:oe,onPageSizeChange:se},{des:o(({record:t,column:u})=>[n(_e,{ellipsis:{rows:2,showTooltip:!0}},{default:o(()=>[C(z(t[u.dataIndex]),1)]),_:2},1024)]),status:o(({record:t,column:u})=>[n(fe,{value:t[u.dataIndex],dict:[]},null,8,["value"])]),operations:o(({record:t})=>[n(i(v),{icon:"svgfont-bianji1",class:"iconbtn",onClick:u=>ae(t),size:18,color:"#0960bd"},null,8,["onClick"]),n(he,{direction:"vertical"}),n(we,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:u=>le(t)},{default:o(()=>[n(i(v),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])]),_:1},8,["loading","pagination","columns","data","size"])])])])]),_:1},8,["size"])]),_:1},8,["isFullscreen"]),n(He,{onRegister:i(q),onSuccess:ne},null,8,["onRegister"]),n(Xe,{onRegister:i(J),onSuccess:e[10]||(e[10]=t=>S(1))},null,8,["onRegister"])])}}});const Rt=Fe(ft,[["__scopeId","data-v-c40bae46"]]);export{Rt as default};
