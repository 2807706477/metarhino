import{B as U,I as A,i as T,m as P,_ as R}from"./index.55d7b75d.js";/* empty css               *//* empty css               *//* empty css              */import{c as H,d as N,r as l,u as z,c9 as Y,aP as u,aK as f,F as j,aH as L,aT as a,H as V,J as O,aU as t,aW as d,aX as M,b3 as J,bx as K,cf as W,bm as X,b6 as q,be as G,bd as Q,bD as Z,bE as x,c7 as ee,c8 as te}from"./arco.c01548ff.js";import{s as ae}from"./dayjs.e902488c.js";import{A as oe,g as ne,u as se,d as ie}from"./AddForm.5edb5fe8.js";import{I as le}from"./IconPicker.396147fe.js";import"./chart.a60a60a0.js";import"./vue.c31cb100.js";/* empty css               *//* empty css               *//* empty css              */const ue=H(()=>[{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u540D\u79F0",dataIndex:"name",align:"center"},{title:"\u63CF\u8FF0",dataIndex:"des",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),de=N({name:"cateindex",components:{BasicModal:U,IconPicker:le,Icon:A,AddForm:oe},emits:["success"],setup(e,{emit:s}){const y=l(!1),I=l(620),C=l(620),F=l([]),{loading:v,setLoading:h}=T(!0),[b,{setModalProps:r,closeModal:D}]=P(async n=>{r({confirmLoading:!1}),y.value=!!n?.isUpdate,i()}),c=()=>({name:"",createtime:[],status:""}),m=l(c()),i=async()=>{h(!0);try{F.value=await ne({...m.value})}catch{}finally{h(!1)}},k=H(()=>z(y)?"\u7F16\u8F91\u6570\u636E":"\u5206\u7C7B\u7BA1\u7406"),_=n=>{C.value=n},w=async n=>{try{u.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:0}),await se({id:n.id,status:n.status}),u.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus",duration:2e3})}catch{n.status=n.status==1?0:1,u.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus",duration:1})}},B=async n=>{try{u.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:0}),await ie({ids:[n.id]}),i(),u.success({content:"\u5220\u9664\u6210\u529F",id:"del",duration:2e3})}catch{u.loading({content:"\u5220\u9664\u4E2D",id:"del",duration:1})}},p=l();return{registerModal:b,getTitle:k,columns:ue,loading:v,dayjs:Y,shortcuts:ae,modelHeight:I,onHeightChange:_,windHeight:C,handleStatus:w,handleDel:B,handleEdit:async n=>{p.value.ShowModal({isUpdate:!0,record:n})},renderData:F,formModel:m,search:()=>{i()},reset:()=>{m.value=c(),i()},createData:async()=>{p.value.ShowModal({isUpdate:!1,record:null})},addFormRef:p}}});const re={class:"table-content"};function ce(e,s,y,I,C,F){const v=K,h=W,b=f("icon-search"),r=X,D=q,c=G,m=f("icon-plus"),i=Q,k=Z,_=f("Icon"),w=x,B=ee,p=te,S=f("AddForm"),E=f("BasicModal");return j(),L(E,J(e.$attrs,{onRegister:e.registerModal,isPadding:!1,footer:!1,loading:e.loading,width:"1000px",onHeightChange:e.onHeightChange,minHeight:e.modelHeight,title:e.getTitle}),{default:a(()=>[V("div",{class:"modalbox",style:O({"min-height":`${e.windHeight}px`})},[V("div",re,[t(i,{style:{"margin-bottom":"10px"}},{default:a(()=>[t(c,{span:16},{default:a(()=>[t(D,null,{default:a(()=>[t(v,{style:{width:"160px"},modelValue:e.formModel.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.formModel.name=o),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),t(h,{modelValue:e.formModel.createtime,"onUpdate:modelValue":s[1]||(s[1]=o=>e.formModel.createtime=o),style:{width:"230px"},shortcuts:e.shortcuts,"shortcuts-position":"left",onChange:e.search},null,8,["modelValue","shortcuts","onChange"]),t(r,{type:"primary",onClick:e.search},{icon:a(()=>[t(b)]),default:a(()=>[s[2]||(s[2]=d(" \u67E5\u8BE2 ",-1))]),_:1},8,["onClick"]),t(r,{onClick:e.reset},{default:a(()=>[d(M(e.$t("searchTable.form.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),t(c,{span:8,style:{"text-align":"right"}},{default:a(()=>[t(D,null,{default:a(()=>[t(r,{type:"primary",onClick:e.createData},{icon:a(()=>[t(m)]),default:a(()=>[d(" "+M(e.$t("searchTable.operation.create")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(p,{"row-key":"id",loading:e.loading,columns:e.columns,data:e.renderData,bordered:{wrapper:!0,cell:!0},size:"medium","default-expand-all-rows":!0,pagination:!1,ref:"artable"},{createtime:a(({record:o})=>[d(M(e.dayjs(o.createtime).format("YYYY-MM-DD")),1)]),status:a(({record:o})=>[t(k,{type:"round",modelValue:o.status,"onUpdate:modelValue":g=>o.status=g,"checked-value":0,"unchecked-value":1,onChange:g=>e.handleStatus(o)},{checked:a(()=>[...s[3]||(s[3]=[d(" \u5F00 ",-1)])]),unchecked:a(()=>[...s[4]||(s[4]=[d(" \u5173 ",-1)])]),_:1},8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:o})=>[t(_,{icon:"svgfont-bianji1",class:"iconbtn",onClick:g=>e.handleEdit(o),size:18,color:"#0960bd"},null,8,["onClick"]),t(w,{direction:"vertical"}),t(B,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:g=>e.handleDel(o)},{default:a(()=>[t(_,{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:1},8,["onOk"])]),_:1},8,["loading","columns","data"])])],4),t(S,{ref:"addFormRef",onSuccess:e.search},null,8,["onSuccess"])]),_:1},16,["onRegister","loading","onHeightChange","minHeight","title"])}const we=R(de,[["render",ce],["__scopeId","data-v-f19127fa"]]);export{we as default};
