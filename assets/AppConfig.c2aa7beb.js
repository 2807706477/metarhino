import{h as _,n as x,_ as y}from"./index.6eeff463.js";/* empty css               */import{d as S,r as m,o as V,F as p,aH as c,aT as e,aW as r,aU as o,aI as E,H as M,aP as F,bx as h,bK as I,be as N,bC as j,bm as k,bd as U,bN as H,b1 as R}from"./arco.31164f47.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";function T(t){return _.get({url:"/datacenter/common_config/getConfig",params:t},{errorMessageMode:"message"})}function G(t){return t.fileSize&&(t.fileSize=parseFloat(t.fileSize)*K(3)),_.post({url:"/datacenter/common_config/saveConfig",params:t},{errorMessageMode:"message"})}function K(t){return Math.pow(1024,t)}const O={class:"frombtn"},P=S({__name:"AppConfig",setup(t){const d=m(!1),u=m({vueobjroot:"",mainurl:"",fileSize:1}),D=async()=>{try{F.loading({content:"\u4FDD\u5B58\u4E2D",id:"updata",duration:0}),parseFloat(u.value.fileSize)<1&&(u.value.fileSize=1),await G(x(u.value)),F.success({content:"\u4FDD\u5B58\u6210\u529F",id:"updata",duration:2e3})}catch{F.loading({content:"\u4FDD\u5B58\u4E2D",id:"updata",duration:1})}};V(()=>{B()});const B=async()=>{const l=await T({});u.value=Object.assign({},u.value,l),d.value=l.showfilesize,u.value.fileSize&&(u.value.fileSize=parseFloat(C(parseFloat(u.value.fileSize))))},C=l=>(l/v(3)).toFixed(2);function v(l){return Math.pow(1024,l)}return(l,a)=>{const f=h,i=I,s=N,g=j,b=k,A=U,w=H,z=R;return u.value?(p(),c(z,{key:0,class:"general-card contentcard"},{title:e(()=>[...a[3]||(a[3]=[r(" \u5E94\u7528(\u7CFB\u7EDF)\u4E3B\u8981\u914D\u7F6E(\u5BF9\u5E94resource/config.yaml\u6216\u7CFB\u7EDF\u6570\u636E\u8868) \u662F\u6574\u4E2A\u9879\u76EE\u5171\u7528\u914D\u7F6E",-1)])]),default:e(()=>[o(w,{ref:"formRef",model:u.value,"auto-label-width":""},{default:e(()=>[o(A,{gutter:80},{default:e(()=>[o(s,{span:24},{default:e(()=>[o(i,{label:"\u524D\u7AEF\u4EE3\u7801\u5F00\u53D1\u6839\u76EE\u5F55\u4F4D\u7F6E",field:"vueobjroot",extra:"\u914D\u7F6E\u4EE3\u7801\u751F\u6210\u65F6-\u524D\u7AEF\u4EE3\u7801\u6839\u76EE\u5F55\u4F4D\u7F6E(\u5F00\u53D1\u5FC5\u6539)"},{default:e(()=>[o(f,{modelValue:u.value.vueobjroot,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value.vueobjroot=n),placeholder:"\u586B\u5199\u9644\u4EF6\u8BF7\u6C42\u8DEF\u5F84\u524D\u7F00","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),o(s,{span:24},{default:e(()=>[o(i,{label:"\u9644\u4EF6\u8BBF\u95EE\u57DF\u540D\u3001\u524D\u7F00\u8DEF\u5F84",field:"mainurl",extra:"\u8FD9\u662F\u914D\u7F6E\u7CFB\u7EDF\u5185\u5B58\u50A8\u5730\u5740\uFF0C\u793A\u4F8B\u5730\u5740\uFF1Ahttps://youdomain.cn/common/uploadfile/getfile?url=\uFF0C\u5982\u679C\u5B89\u88C5\u817E\u8BAF\u4E91cos\u3001\u963F\u91CC\u4E91oss\u3001\u4E03\u725B\u7B49\u540E\u4F1A\u4F18\u5148\u5207\u6362\u5230\u4E09\u65B9\u5B58\u50A8"},{default:e(()=>[o(f,{modelValue:u.value.mainurl,"onUpdate:modelValue":a[1]||(a[1]=n=>u.value.mainurl=n),placeholder:"\u586B\u5199\u9644\u4EF6\u8BF7\u6C42\u8DEF\u5F84\u524D\u7F00","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),d.value?(p(),c(s,{key:0,span:24},{default:e(()=>[o(i,{label:"\u9644\u4EF6\u5B58\u50A8\u7A7A\u95F4",field:"fileSize",extra:"\u8BBE\u7F6E\u9644\u4EF6\u5B58\u50A8\u5927\u5C0F\uFF0C\u5373\u9650\u5236\u9644\u4EF6\u5B58\u50A8\u4E0A\u9650\uFF08\u4EC5\u5728\u4E0D\u5B89\u88C5admin\u7AEF\u548C\u8D85\u7EA7\u89D2\u8272\u7EC4\u7528\u6237\u663E\u793A\uFF09"},{default:e(()=>[o(g,{min:1,modelValue:u.value.fileSize,"onUpdate:modelValue":a[2]||(a[2]=n=>u.value.fileSize=n),placeholder:"\u8F93\u5165\u9644\u4EF6\u5B58\u50A8\u5927\u5C0F","allow-clear":"","hide-button":""},{suffix:e(()=>[...a[4]||(a[4]=[r("G",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})):E("",!0),o(s,{span:24},{default:e(()=>[o(i,null,{default:e(()=>[M("div",O,[o(b,{type:"primary","html-type":"submit",style:{width:"120px"},onClick:D},{default:e(()=>[...a[5]||(a[5]=[r("\u4FDD\u5B58",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})):E("",!0)}}});const X=y(P,[["__scopeId","data-v-dd5e86c7"]]);export{X as default};
