import{b as W,c as Ne,d as Ve,u as z,l as je,e as ie,v as de,f as _e,I as Ke,r as ae,o as X,_ as U,h as pe,i as qe,a as He,G as We,L as Ge,j as ee,R as Je,D as q,k as Ye}from"./index.ec13b3f4.js";import{c as x,d as P,r as A,aU as n,bO as Ze,bj as Xe,h as se,bP as Qe,bQ as et,bR as tt,aK as w,F as _,aH as k,bn as le,aT as t,H as f,aW as T,aX as D,I as H,G as I,aV as G,J as j,aI as $,aY as J,b8 as nt,b5 as fe,bS as ot,b6 as me,bT as at,bU as st,bV as lt,aR as ct,bW as ut,j as rt,t as it,u as L,bX as dt,bJ as ve,bm as ge,bI as he,bl as _t,i as pt,b2 as be,bv as ye,bh as ft,bY as te,bZ as ne,b_ as mt,ba as vt,bd as gt,bE as ht,b$ as bt,w as ke,C as yt,o as Ce,b7 as kt,b as Ct,aJ as ce,c0 as Lt,c1 as wt,n as xt,bG as Tt,c2 as Dt,y as Mt,c3 as Et,c4 as St}from"./arco.31164f47.js";import{e as K,u as Y,k as $t,i as It,l as Bt,m as Rt}from"./vue.85c125e1.js";/* empty css               *//* empty css               */import{_ as Ft}from"./logo.b25b9781.js";/* empty css              *//* empty css               *//* empty css               */import"./chart.0656511d.js";function At(){const u=K(),s=W();return{logout:c=>{s.logout();const i=u.currentRoute.value;u.push({name:c&&typeof c=="string"?c:"login",query:{...u.currentRoute.value.query,redirect:i.name}})}}}const Pt=[...Ne,...Ve],Ut=Pt.map(u=>{const{name:s,path:r,meta:c,redirect:i,children:h}=u;return{name:s,path:r,meta:c,redirect:i,children:h}});function zt(){const u=ie(),s=z(),r=x(()=>s.menuFromServer?s.appAsyncMenus:Ut);return{menuTree:x(()=>{const i=je.exports.cloneDeep(r.value);i.sort((m,g)=>(m.meta.order||0)-(g.meta.order||0));function h(m,g){return m?m.map(v=>{if(!u.accessRouter(v))return null;if(v.meta?.hideChildrenInMenu||!v.children)return v.children=[],v;v.children=v.children.filter(E=>E.meta?.hideInMenu!==!0);const M=h(v.children,g+1);return M.length||g>1?(v.children=M,v):v.meta?.hideInMenu===!1?v:null}).filter(Boolean):null}return h(i,0)})}}function Ot(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!Xe(u)}const Nt=P({emit:["collapse"],setup(){const{t:u}=de.exports.useI18n(),s=z(),r=K(),c=Y(),{menuTree:i}=zt(),h=x({get(){return s.device==="desktop"?s.menuCollapse:!1},set(e){s.updateSettings({menuCollapse:e})}}),m=x(()=>s.topMenu),g=A([]),C=A([]),v=e=>{if(ae.test(e.path)){X(e.path),C.value=[e.name];return}else if(e.meta&&e.meta.isExt&&ae.test(e.component)){X(e.component),C.value=[e.name];return}else if(e.meta?.onlypage){var o=r.resolve({path:e.path}).href+"?business_id="+W().id;e.meta?.requiresAuth||(o=o+"&rouid="+e.meta?.id),X(o),C.value=[e.name];return}const{hideInMenu:l,activeMenu:a}=e.meta;if(c.name===e.name&&!l&&!a){C.value=[e.name];return}r.push({name:e.name})},M=e=>{const o=[];let l=!1;const a=(d,p)=>{if(d.name===e){l=!0,o.push(...p);return}d.children?.length&&d.children.forEach(S=>{a(S,[...p,S.name])})};return i.value.forEach(d=>{l||a(d,[d.name])}),o};_e(e=>{const{requiresAuth:o,activeMenu:l,hideInMenu:a}=e.meta;if(o&&(!a||l)){const d=M(l||e.name),p=new Set([...d,...g.value]);g.value=[...p],C.value=[l||d[d.length-1]]}},!0);const E=e=>{s.device==="desktop"&&s.updateSettings({menuCollapse:e})},b=()=>{function e(o,l=[]){return o&&o.forEach(a=>{if(a?.meta?.hideInMenu)return;const d=a?.meta?.icon?()=>se(Ke,{icon:a?.meta?.icon,size:18}):null,p=a?.children&&a?.children.length!==0?n(et,{key:a?.name},{default:()=>[e(a?.children)],icon:d,title:()=>a?.meta?.locale?se(Qe(u(a?.meta?.locale))):a?.meta?.title}):n(tt,{key:a?.name,onClick:()=>v(a)},{default:()=>[a?.meta?.locale?u(a?.meta?.locale):a?.meta?.title],icon:d});l.push(p)}),l}return e(i.value)};return()=>{let e;return n(Ze,{mode:m.value?"horizontal":"vertical",collapsed:h.value,"onUpdate:collapsed":o=>h.value=o,"open-keys":g.value,"onUpdate:open-keys":o=>g.value=o,"show-collapse-button":s.device!=="mobile",accordion:s.menuAccordion,"auto-open":!1,"selected-keys":C.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%;width:100%;",onCollapse:E},Ot(e=b())?e:{default:()=>[e]})}}});const Q=U(Nt,[["__scopeId","data-v-0984b2cd"]]);function Vt(){return pe.get({url:"/common/message/getList"},{errorMessageMode:"message"})}function jt(u){return pe.post({url:"/common/message/read",params:u},{errorMessageMode:"message"})}const Kt=["onClick"],qt=["src"],Ht={class:"footer-wrap"},Wt={class:"footer-wrap"},ue=2,Gt=P({__name:"list",props:{renderList:{type:Array,required:!0},unreadCount:{type:Number,default:0}},emits:["itemClick"],setup(u,{emit:s}){const r=u,c=s,i=()=>{c("itemClick",[...r.renderList])},h=m=>{m.status||c("itemClick",[m])};return(m,g)=>{const C=nt,v=w("icon-desktop"),M=fe,E=ot,b=me,e=at,o=st,l=lt,a=ct,d=ut;return _(),k(d,{bordered:!1},le({default:t(()=>[(_(!0),I(J,null,G(u.renderList,p=>(_(),k(l,{key:p.id,"action-layout":"vertical",style:j({opacity:p.status?.5:1})},{extra:t(()=>[p.messageType===0?(_(),k(C,{key:0,color:"gray"},{default:t(()=>[...g[0]||(g[0]=[T("\u672A\u5F00\u59CB",-1)])]),_:1})):p.messageType===1?(_(),k(C,{key:1,color:"green"},{default:t(()=>[...g[1]||(g[1]=[T("\u5DF2\u5F00\u901A",-1)])]),_:1})):p.messageType===2?(_(),k(C,{key:2,color:"blue"},{default:t(()=>[...g[2]||(g[2]=[T("\u8FDB\u884C\u4E2D",-1)])]),_:1})):p.messageType===3?(_(),k(C,{key:3,color:"red"},{default:t(()=>[...g[3]||(g[3]=[T("\u5373\u5C06\u5230\u671F",-1)])]),_:1})):$("",!0)]),default:t(()=>[f("div",{class:"item-wrap",onClick:S=>h(p)},[n(o,null,le({title:t(()=>[n(b,{size:4},{default:t(()=>[f("span",null,D(p.title),1),n(E,{type:"secondary"},{default:t(()=>[T(D(p.subTitle),1)]),_:2},1024)]),_:2},1024)]),description:t(()=>[f("div",null,[n(e,{ellipsis:{rows:1}},{default:t(()=>[T(D(p.content),1)]),_:2},1024),p.type==="message"?(_(),k(E,{key:0,class:"time-text"},{default:t(()=>[T(D(p.time),1)]),_:2},1024)):$("",!0)])]),_:2},[p.avatar?{name:"avatar",fn:t(()=>[n(M,{shape:"circle"},{default:t(()=>[p.avatar?(_(),I("img",{key:0,src:p.avatar},null,8,qt)):(_(),k(v,{key:1}))]),_:2},1024)]),key:"0"}:void 0]),1024)],8,Kt)]),_:2},1032,["style"]))),128)),u.renderList.length&&u.renderList.length<3?(_(),I("div",{key:0,style:j({height:(ue-u.renderList.length)*86+"px"})},null,4)):$("",!0)]),_:2},[u.renderList.length>0?{name:"footer",fn:t(()=>[n(b,{fill:"",size:0,class:H({"add-border-top":u.renderList.length<ue})},{default:t(()=>[f("div",Ht,[n(a,{onClick:i},{default:t(()=>[T(D(m.$t("messageBox.allRead")),1)]),_:1})]),f("div",Wt,[n(a,null,{default:t(()=>[T(D(m.$t("messageBox.viewMore")),1)]),_:1})])]),_:1},8,["class"])]),key:"0"}:void 0]),1024)}}});const Jt=U(Gt,[["__scopeId","data-v-743cc880"]]),Yt=P({__name:"index",setup(u){const{loading:s,setLoading:r}=qe(!0),c=A("message"),{t:i}=de.exports.useI18n(),h=rt({renderList:[],messageList:[]});it(h);const m=[{key:"message",title:"messageBox.tab.title.message"},{key:"notice",title:"messageBox.tab.title.notice"},{key:"todo",title:"messageBox.tab.title.todo"}];async function g(){r(!0);try{const l=await Vt();h.messageList=l.items}catch{}finally{r(!1)}}async function C(l){const a=l.map(d=>d.id);await jt({ids:a}),g()}const v=x(()=>h.messageList.filter(l=>c.value===l.type)),M=x(()=>v.value.filter(l=>!l.status).length),E=l=>h.messageList.filter(d=>d.type===l&&!d.status),b=l=>{const a=E(l);return a.length?`(${a.length})`:""},e=l=>{v.value.length&&C([...l])},o=()=>{h.messageList=[]};return g(),(l,a)=>{const d=dt,p=ve,S=ge,R=he,F=_t;return _(),k(F,{style:{display:"block"},loading:L(s)},{default:t(()=>[n(R,{activeKey:c.value,"onUpdate:activeKey":a[0]||(a[0]=y=>c.value=y),type:"rounded","destroy-on-hide":""},{extra:t(()=>[n(S,{type:"text",onClick:o,shape:"round",size:"small"},{default:t(()=>[T(D(l.$t("messageBox.tab.button")),1)]),_:1})]),default:t(()=>[(_(),I(J,null,G(m,y=>n(p,{key:y.key},{title:t(()=>[f("span",null,D(L(i)(y.title))+D(b(y.key)),1)]),default:t(()=>[v.value.length?$("",!0):(_(),k(d,{key:0,status:"404"},{subtitle:t(()=>[T(D(l.$t("messageBox.noContent")),1)]),_:1})),n(Jt,{"render-list":v.value,"unread-count":M.value,onItemClick:e},null,8,["render-list","unread-count"])]),_:2},1024)),64))]),_:1},8,["activeKey"])]),_:1},8,["loading"])}}});const Zt=U(Yt,[["__scopeId","data-v-72c28bec"]]),Xt={class:"left-side"},Qt={key:0,class:"sitetitle"},en={class:"center-side"},tn={class:"right-side"},nn={class:"message-box-trigger"},on={class:"username"},an=P({__name:"index",setup(u){const s=z(),r=W(),{logout:c}=At(),{changeLocale:i,currentLocale:h}=He(),{isFullscreen:m,toggle:g}=$t(),C=[...Ge],v=x(()=>s.theme),M=x(()=>s.topMenu&&s.menu),E=It({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(y){s.toggleTheme(y)}}),b=Bt(E),e=()=>{b()},o=()=>{s.updateSettings({globalSettings:!0})},l=A(),a=A(),d=()=>{const y=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});l.value.dispatchEvent(y)},p=()=>{c()},S=()=>{const y=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.value.dispatchEvent(y)},R=pt("toggleDrawerMenu"),F=window?.globalConfig.AppTitle;return(y,B)=>{const Le=w("icon-menu-fold"),we=me,xe=w("icon-language"),O=ge,N=ft,Te=w("icon-check"),Z=te,oe=ne,De=w("icon-moon-fill"),Me=w("icon-sun-fill"),Ee=w("icon-notification"),Se=mt,$e=vt,Ie=w("icon-fullscreen-exit"),Be=w("icon-fullscreen"),Re=w("icon-settings"),Fe=fe,Ae=w("icon-down"),Pe=gt,Ue=w("icon-user"),ze=ht,Oe=w("icon-export");return _(),I("div",{class:"navbar",style:j({backgroundImage:v.value==="dark"||!L(s).navBg?"":"url(https://cms.goflys.cn/navbarbg.jpg) ",backgroundSize:"100% 60px"})},[f("div",Xt,[n(we,null,{default:t(()=>[B[1]||(B[1]=f("img",{alt:"logo",src:Ft,style:{height:"33px",overflow:"hidden"}},null,-1)),L(s).device==="desktop"?(_(),I("div",Qt,D(L(F)),1)):$("",!0),!M.value&&L(s).device==="mobile"?(_(),k(Le,{key:1,style:{"font-size":"22px",cursor:"pointer"},onClick:L(R)},null,8,["onClick"])):$("",!0)]),_:1})]),f("div",en,[M.value?(_(),k(Q,{key:0})):$("",!0)]),f("ul",tn,[f("li",null,[n(N,{content:y.$t("settings.language")},{default:t(()=>[n(O,{class:"nav-btn",type:"outline",shape:"circle",onClick:S},{icon:t(()=>[n(xe)]),_:1})]),_:1},8,["content"]),n(oe,{trigger:"click",onSelect:L(i)},{content:t(()=>[(_(),I(J,null,G(C,V=>n(Z,{key:V.value,value:V.value},{icon:t(()=>[be(n(Te,null,null,512),[[ye,V.value===L(h)]])]),default:t(()=>[T(" "+D(V.label),1)]),_:2},1032,["value"])),64))]),default:t(()=>[f("div",{ref_key:"triggerBtn",ref:a,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),f("li",null,[n(N,{content:v.value==="light"?y.$t("settings.navbar.theme.toDark"):y.$t("settings.navbar.theme.toLight")},{default:t(()=>[n(O,{class:"nav-btn",type:"outline",shape:"circle",onClick:e},{icon:t(()=>[v.value==="dark"?(_(),k(De,{key:0})):(_(),k(Me,{key:1}))]),_:1})]),_:1},8,["content"])]),f("li",null,[n(N,{content:y.$t("settings.navbar.alerts")},{default:t(()=>[f("div",nn,[n(Se,{count:9,dot:""},{default:t(()=>[n(O,{class:"nav-btn",type:"outline",shape:"circle",onClick:d},{default:t(()=>[n(Ee)]),_:1})]),_:1})])]),_:1},8,["content"]),n($e,{trigger:"click","arrow-style":{display:"none"},"content-style":{padding:0,width:"420px"},"content-class":"message-popover"},{content:t(()=>[n(Zt)]),default:t(()=>[f("div",{ref_key:"refBtn",ref:l,class:"ref-btn"},null,512)]),_:1})]),f("li",null,[n(N,{content:L(m)?y.$t("settings.navbar.screen.toExit"):y.$t("settings.navbar.screen.toFull")},{default:t(()=>[n(O,{class:"nav-btn",type:"outline",shape:"circle",onClick:L(g)},{icon:t(()=>[L(m)?(_(),k(Ie,{key:0})):(_(),k(Be,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),f("li",null,[n(N,{content:y.$t("settings.title")},{default:t(()=>[n(O,{class:"nav-btn",type:"outline",shape:"circle",onClick:o},{icon:t(()=>[n(Re)]),_:1})]),_:1},8,["content"])]),f("li",null,[n(oe,{trigger:"hover"},{content:t(()=>[n(Z,{onClick:B[0]||(B[0]=V=>y.$router.push({path:"/usersetting"}))},{icon:t(()=>[n(Ue)]),default:t(()=>[T(D(y.$t("messageBox.userCenter")),1)]),_:1}),n(ze,{margin:1}),n(Z,{onClick:p},{icon:t(()=>[n(Oe)]),default:t(()=>[T(D(y.$t("messageBox.logout")),1)]),_:1})]),default:t(()=>[n(Pe,{align:"center",wrap:!1,class:"user"},{default:t(()=>[n(Fe,{size:32,imageUrl:L(We)(L(r).avatar)},null,8,["imageUrl"]),f("span",on,D(L(r).name),1),n(Ae)]),_:1})]),_:1})])])],4)}}});const sn=U(an,[["__scopeId","data-v-7ff3c3e4"]]),ln={key:0},cn=["href"],un={class:"copyright"},rn=["href"],dn=P({__name:"index",setup(u){const s=window?.globalConfig.Address,r=window?.globalConfig.TeamSite,c=window?.globalConfig.Team,i=window?.globalConfig.CompanySite,h=window?.globalConfig.Company,m=new Date().getFullYear();return(g,C)=>{const v=bt;return _(),k(v,{class:"footer"},{default:t(()=>[f("span",null,[T(D(L(s))+" ",1),L(c)?(_(),I("span",ln,"&")):$("",!0),C[0]||(C[0]=T()),f("a",{href:L(r),target:"_blank"},D(L(c)),9,cn)]),f("span",un,[T(" \u24D2 2018-"+D(L(m))+" ",1),f("a",{href:L(i),target:"_blank"},D(L(h)),9,rn),T(" "+D(g.$t("footer.copyright")),1)])]),_:1})}}});const _n=U(dn,[["__scopeId","data-v-16034d7e"]]),pn={class:"tag-link"},fn=P({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(u){const s=u,r=K(),c=Y(),i=ee(),h=x(()=>i.getTabList),m=x(()=>s.itemData.fullPath!==c.fullPath),g=x(()=>s.index===0),C=x(()=>[0,1].includes(s.index)),v=x(()=>s.index===h.value.length-1),M=(e,o)=>{if(i.deleteTag(o,e),s.itemData.fullPath===c.fullPath){const l=h.value[o-1];r.push({name:l.name})}},E=()=>h.value.findIndex(e=>e.fullPath===c.fullPath),b=async e=>{const{itemData:o,index:l}=s,a=[...h.value];if(e==="current")M(o,l);else if(e==="left"){const d=E();a.splice(1,s.index-1),i.freshTabList(a),d<l&&r.push({name:o.name})}else if(e==="right"){const d=E();a.splice(s.index+1),i.freshTabList(a),d>l&&r.push({name:o.name})}else if(e==="others"){const d=h.value.filter((p,S)=>S===0||S===s.index);i.freshTabList(d),r.push({name:o.name})}else e==="reload"?(i.deleteCache(o),await r.push({name:Je,params:{path:c.fullPath}}),i.addCache(o.name)):(i.resetTabList(),r.push({name:q}))};return(e,o)=>{const l=w("icon-refresh"),a=te,d=w("icon-close"),p=w("icon-to-left"),S=w("icon-to-right"),R=w("icon-swap"),F=w("icon-folder-delete"),y=ne;return _(),k(y,{trigger:"contextMenu","popup-max-height":!1,onSelect:b},{content:t(()=>[n(a,{disabled:m.value,value:"reload"},{default:t(()=>[n(l),o[0]||(o[0]=f("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1))]),_:1},8,["disabled","value"]),n(a,{class:"sperate-line",disabled:g.value,value:"current"},{default:t(()=>[n(d),o[1]||(o[1]=f("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),n(a,{disabled:C.value,value:"left"},{default:t(()=>[n(p),o[2]||(o[2]=f("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),n(a,{class:"sperate-line",disabled:v.value,value:"right"},{default:t(()=>[n(S),o[3]||(o[3]=f("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1))]),_:1},8,["disabled","value"]),n(a,{value:"others"},{default:t(()=>[n(R),o[4]||(o[4]=f("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1))]),_:1},8,["value"]),n(a,{value:"all"},{default:t(()=>[n(F),o[5]||(o[5]=f("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1))]),_:1},8,["value"])]),default:t(()=>[f("span",{class:H(["arco-tag-size-medium",{"link-activated":u.itemData.name===e.$route.name}])},[f("span",pn,D(e.$t(u.itemData.title)),1)],2)]),_:1})}}});const mn=U(fn,[["__scopeId","data-v-2dd1af39"]]),vn={class:"tab-bar-container"},gn={class:"tab-bar-box"},hn=P({__name:"index",setup(u){const s=Y(),r=K(),c=z(),i=ee(),h=A(),m=x(()=>i.getTabList.filter((b,e,o)=>e===o.findIndex(l=>l.name===b.name)));x(()=>c.navbar?50:0),ke(()=>c.navbar,()=>{h.value.updatePosition()}),_e(b=>{!b.meta.noAffix&&!m.value.some(e=>e.fullPath===b.fullPath)&&i.updateTabList(b)},!0);const g=b=>{m.value.forEach((e,o)=>{if(e.name==b&&q!=e.name&&(i.deleteTag(o,e),e.name==s.name)){const l=m.value[o-1];r.push({name:l.name})}})},C=()=>{m.value.forEach((b,e)=>{if(b.fullPath==s.fullPath&&q!=b.name){i.deleteTag(e,b);const o=m.value[e-1];r.push({name:o.name})}})},v=()=>{m.value.forEach((b,e)=>{if(b.fullPath==s.fullPath){const o=m.value.filter((l,a)=>a===0||a===e);i.freshTabList(o),r.push({name:b.name})}})},M=()=>{i.resetTabList(),r.push({name:q})},E=b=>{const e=m.value.find(o=>o.name==b);e&&r.push({...e})};return yt(()=>{Ye()}),(b,e)=>{const o=ve,l=w("icon-drag-dot-vertical"),a=w("icon-close"),d=te,p=w("icon-eraser"),S=w("icon-minus"),R=ne,F=he;return _(),I("div",vn,[f("div",gn,[n(F,{type:"card-gutter",editable:"","hide-content":"",size:"medium","active-key":L(s).name,onTabClick:E,onDelete:g},{extra:t(()=>[n(R,{trigger:"hover"},{content:t(()=>[n(d,{onClick:C},{icon:t(()=>[n(a)]),default:t(()=>[...e[2]||(e[2]=[T("\u5173\u95ED\u5F53\u524D",-1)])]),_:1}),n(d,{onClick:v},{icon:t(()=>[n(p)]),default:t(()=>[...e[3]||(e[3]=[T("\u5173\u95ED\u5176\u4ED6",-1)])]),_:1}),n(d,{onClick:M},{icon:t(()=>[n(S)]),default:t(()=>[...e[4]||(e[4]=[T("\u5173\u95ED\u5168\u90E8",-1)])]),_:1})]),default:t(()=>[n(l)]),_:1})]),default:t(()=>[(_(!0),I(J,null,G(m.value,(y,B)=>(_(),k(o,{key:y.name,closable:B>0},{title:t(()=>[n(mn,{index:B,"item-data":y},null,8,["index","item-data"]),e[0]||(e[0]=f("svg",{class:"tabs_chrome_left",height:"7",width:"7"},[f("path",{"data-v-bae60330":"",d:"M 0 7 A 7 7 0 0 0 7 0 L 7 7 Z"})],-1)),e[1]||(e[1]=f("svg",{class:"tabs_chrome_right",height:"7",width:"7"},[f("path",{"data-v-bae60330":"",d:"M 0 0 A 7 7 0 0 0 7 7 L 0 7 Z"})],-1))]),_:2},1032,["closable"]))),128))]),_:1},8,["active-key"])])])}}});const bn=U(hn,[["__scopeId","data-v-63079497"]]);function yn(u,s,r,c=!1){u.addEventListener&&typeof u.addEventListener=="function"&&u.addEventListener(s,r,c)}function kn(u,s,r,c=!1){u.removeEventListener&&typeof u.removeEventListener=="function"&&u.removeEventListener(s,r,c)}const Cn=992;function Ln(){return document.body.getBoundingClientRect().width-1<Cn}function wn(u){const s=z();function r(){if(!document.hidden){const i=Ln();s.toggleDevice(i?"mobile":"desktop"),s.toggleMenu(i)}}const c=Rt(r,100);Ce(()=>{u&&c()}),kt(()=>{yn(window,"resize",c)}),Ct(()=>{kn(window,"resize",c)})}const xn=P({__name:"page-layout",setup(u){const s=ee(),r=x(()=>s.getCacheList);return(c,i)=>{const h=w("router-view");return _(),k(h,null,{default:t(({Component:m,route:g})=>[n(wt,{name:"fade",mode:"out-in",appear:""},{default:t(()=>[g.meta.ignoreCache?(_(),k(ce(m),{key:g.fullPath})):(_(),k(Lt,{key:1,include:r.value},[(_(),k(ce(m),{key:g.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),re="50px",Tn=P({__name:"default-layout",setup(u){const s=A(!1),r=A(),c=z(),i=W(),h=K(),m=Y(),g=ie();wn(!0);const C=x(()=>c.navbar),v=x(()=>c.menu&&!c.topMenu),M=x(()=>c.hideMenu),E=x(()=>c.footer),b=x(()=>c.menuCollapse?48:c.menuWidth),e=x(()=>c.menuCollapse),o=x(()=>{const p=v.value&&!M.value?{paddingLeft:`${b.value}px`}:{},S=C.value?{paddingTop:re}:{};return{...p,...S}}),l=p=>{!s.value||c.updateSettings({menuCollapse:p})};ke(()=>i.id,p=>{p&&!g.accessRouter(m)&&h.push({name:"notFound"})});const a=A(!1),d=()=>{a.value=!1};return Mt("toggleDrawerMenu",()=>{a.value=!a.value}),Ce(()=>{s.value=!0,xt(()=>{})}),(p,S)=>{const R=Et,F=Tt,y=St,B=Dt;return _(),k(B,{class:H(["layout layout-default",{mobile:L(c).hideMenu}])},{default:t(()=>[C.value?(_(),I("div",{key:0,class:"layout-navbar",ref_key:"navbarRef",ref:r},[n(sn)],512)):$("",!0),v.value?be((_(),k(R,{key:1,class:"layout-sider",breakpoint:"xl",collapsed:e.value,collapsible:!0,width:b.value,style:j({paddingTop:C.value?re:""}),"hide-trigger":!0,onCollapse:l},{default:t(()=>[f("div",{class:H(["menu-wrapper",{"app-menu-dark":L(c).menuDark}])},[n(Q)],2)]),_:1},8,["collapsed","width","style"])),[[ye,!M.value]]):$("",!0),M.value?(_(),k(F,{key:2,visible:a.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:d},{default:t(()=>[n(Q)]),_:1},8,["visible"])):$("",!0),n(B,{class:"layout-content",style:j(o.value)},{default:t(()=>[L(c).tabBar?(_(),k(bn,{key:0,class:"layout-tabbar"})):$("",!0),n(y,{class:"content-page"},{default:t(()=>[n(xn)]),_:1}),E.value?(_(),k(_n,{key:1})):$("",!0)]),_:1},8,["style"])]),_:1},8,["class"])}}});const Pn=U(Tn,[["__scopeId","data-v-edc262a4"]]);export{Pn as default};
