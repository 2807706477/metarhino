import{B as h,I as w,v as k,m as A,n as V,i as I,_ as M}from"./index.6eeff463.js";/* empty css               *//* empty css               *//* empty css              */import{d as y,r as s,u as F,c as C,aP as v,aK as U,F as L,aH as P,aT as l,aU as u,b3 as T,bx as $,bK as N,c5 as R,bC as S,c6 as O,bN as H}from"./arco.31164f47.js";import{g as K,s as j}from"./dept.08eae48a.js";import{I as q}from"./IconPicker.626a42e6.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";const Y=y({name:"AddForm",components:{BasicModal:h,IconPicker:q,Icon:w},emits:["success"],setup(e,{emit:a}){const{t:D}=k.exports.useI18n(),r=s(!1),i=s([]),d=s(),m={id:0,name:"",pid:0,weigh:1,remark:""},o=s(m),p=s(""),[c,{setModalProps:f,closeModal:E}]=A(async n=>{d.value?.resetFields(),f({confirmLoading:!1});const _=await K(),B=[{id:0,name:"\u4E00\u7EA7\u90E8\u95E8",pid:0}];_?i.value=B.concat(_):i.value=B,r.value=!!n?.isUpdate,F(r)?(p.value=n.record.component,o.value=V(n.record)):o.value=V(m)}),g=C(()=>F(r)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),{loading:t,setLoading:b}=I();return{registerModal:c,getTitle:g,handleSubmit:async()=>{try{await d.value?.validate()||(b(!0),v.loading({content:"\u63D0\u4EA4\u4E2D",id:"save",duration:0}),await j(F(o)),v.success({content:"\u63D0\u4EA4\u6210\u529F",id:"save",duration:2e3}),E(),a("success"),b(!1))}catch{b(!1),v.loading({content:"\u63D0\u4EA4\u4E2D",id:"save",duration:2})}},formRef:d,loading:t,formData:o,parntList:i,t:D,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}]}}});function x(e,a,D,r,i,d){const m=$,o=N,p=R,c=S,f=O,E=H,g=U("BasicModal");return L(),P(g,T(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u90E8\u95E8",width:"900px",minHeight:500,title:e.getTitle,onOk:e.handleSubmit}),{default:l(()=>[u(E,{ref:"formRef",model:e.formData,"auto-label-width":"",style:{padding:"10px 20px"}},{default:l(()=>[u(o,{field:"name",label:"\u90E8\u95E8\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:l(()=>[u(m,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.name=t),placeholder:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u4E0A\u7EA7\u90E8\u95E8",field:"pid",style:{"margin-bottom":"15px"}},{default:l(()=>[u(p,{placeholder:"\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",data:e.parntList,fieldNames:{key:"id",title:"name",children:"children"},modelValue:e.formData.pid,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.pid=t)},null,8,["data","modelValue"])]),_:1}),u(o,{label:"\u6392\u5E8F",field:"weigh",style:{"margin-bottom":"15px"}},{default:l(()=>[u(c,{modelValue:e.formData.weigh,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.weigh=t),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),u(o,{field:"remark",label:"\u5907\u6CE8","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:l(()=>[u(f,{modelValue:e.formData.remark,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.remark=t),placeholder:"\u8BF7\u586B\u5199\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const te=M(Y,[["render",x]]);export{te as default};
