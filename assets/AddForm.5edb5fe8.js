import{F as w,h as c,i as V,n as M,_ as S}from"./index.55d7b75d.js";/* empty css               *//* empty css               *//* empty css              */import{d as h,r as l,c as y,u as v,aP as _,F as A,aH as T,aT as r,aU as o,bx as U,bK as L,c5 as k,bC as C,c6 as O,bN as $,aO as N}from"./arco.c01548ff.js";function I(e){return e=w(e),c.get({url:"/createcode/productcate/getTree",params:e},{errorMessageMode:"message"})}function P(e){return c.post({url:"/createcode/productcate/save",params:e},{errorMessageMode:"message"})}function W(e){return c.post({url:"/createcode/productcate/upStatus",params:e},{errorMessageMode:"message"})}function X(e){return c.delete({url:"/createcode/productcate/del",params:e},{errorMessageMode:"message"})}const j=h({name:"AddForm",components:{},emits:["success"],setup(e,{emit:t}){const d=l(!1),i=l(!1),D=l([]),m=l([]),p=l(),u={id:0,name:"",weigh:1,des:""},s=l(u),f=l(""),g=async n=>{d.value=!0,i.value=!!n?.isUpdate;const B=await I({}),E=[{id:0,name:"\u4E00\u7EA7\u6570\u636E"}];B?m.value=E.concat(B):m.value=E,v(i)?(f.value=n.record.component,s.value=M(n.record)):s.value=M(u)},b=y(()=>v(i)?"\u7F16\u8F91":"\u65B0\u589E"),{loading:F,setLoading:a}=V();return{ShowModal:g,getTitle:b,handleSubmit:async()=>{try{await p.value?.validate()||(a(!0),_.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus",duration:0}),await P(v(s)),_.success({content:"\u66F4\u65B0\u6210\u529F",id:"upStatus",duration:2e3}),t("success"),a(!1),d.value=!1)}catch{a(!1),_.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus",duration:1})}},formRef:p,loading:F,formData:s,parntList:D,visibleModal:d,treeList:m}}});function q(e,t,d,i,D,m){const p=U,u=L,s=k,f=C,g=O,b=$,F=N;return A(),T(F,{visible:e.visibleModal,"onUpdate:visible":t[4]||(t[4]=a=>e.visibleModal=a),width:"600px","title-align":"start",title:e.getTitle,onOk:e.handleSubmit},{default:r(()=>[o(b,{ref:"formRef",model:e.formData,"auto-label-width":"",style:{padding:"10px 20px"}},{default:r(()=>[o(u,{field:"name",label:"\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u540D\u79F0"}]},{default:r(()=>[o(p,{modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.name=a),placeholder:"\u8BF7\u586B\u5199\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(u,{field:"pid",label:"\u4E0A\u7EA7","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u540D\u79F0"}]},{default:r(()=>[o(s,{placeholder:"\u9009\u62E9\u4E0A\u7EA7",data:e.treeList,modelValue:e.formData.pid,"onUpdate:modelValue":t[1]||(t[1]=a=>e.formData.pid=a),"allow-search":"",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["data","modelValue"])]),_:1}),o(u,{label:"\u6392\u5E8F",field:"weigh",style:{"margin-bottom":"15px"}},{default:r(()=>[o(f,{modelValue:e.formData.weigh,"onUpdate:modelValue":t[2]||(t[2]=a=>e.formData.weigh=a),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),o(u,{field:"des",label:"\u5907\u6CE8","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:r(()=>[o(g,{modelValue:e.formData.des,"onUpdate:modelValue":t[3]||(t[3]=a=>e.formData.des=a),placeholder:"\u8BF7\u586B\u5199\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","onOk"])}const H=S(j,[["render",q]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as A,Y as a,X as d,I as g,W as u};
