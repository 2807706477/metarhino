import{B as _,I as B,m as A,i as k,_ as y}from"./index.afcd2e8c.js";/* empty css               */import{d as v,r,h as I,af as w,aP as n,aO as S,aK as T,F as M,aH as H,aT as s,H as m,J as $,aU as l,aW as C,b3 as P,bx as N,bm as K,b6 as O,c8 as x}from"./arco.31164f47.js";import{c as V,u as L}from"./generatecode.b5d7d855.js";import{g as R}from"./common.bbd0496d.js";import{I as U}from"./IconPicker.c662fd96.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";const j=v({name:"AddDb",components:{BasicModal:_,IconPicker:U,Icon:B},emits:["success"],setup(e,{emit:t}){const D=r(600),E=r([]),[f,{closeModal:h}]=A(async u=>{d(!0),E.value=await R({}),d(!1)}),i=r([]),a=r([]),p=u=>{a.value=u},{loading:F,setLoading:d}=k(),o=async()=>{if(a.value.length==0){n.warning({content:"\u8BF7\u9009\u62E9\u751F\u6210\u4EE3\u7801\u7684\u6570\u636E\u8868",id:"checked",duration:2e3});return}try{n.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:0});const u=await V({tablenames:a.value});n.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:1}),u.length>0?S.warning({title:"\u6E29\u99A8\u63D0\u793A",content:`\u60A8\u9009\u62E9\u7684\u201C${u.join(",")}\u201D\u6570\u636E\u8868\u5DF2\u7ECF\u5728\u751F\u6210\u5217\u8868\u4E2D\uFF0C\u60A8\u9700\u8981\u91CD\u65B0\u6DFB\u52A0\u5417\uFF1F`,okText:"\u786E\u5B9A",hideCancel:!1,titleAlign:"start",cancelText:"\u53D6\u6D88",onOk:async()=>{c()}}):c()}catch{n.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:1})}},c=async()=>{try{i.value=[],n.loading({content:"\u6DFB\u52A0\u4E2D",id:"upStatus",duration:0}),await L({tablenames:a.value}),n.success({content:"\u6DFB\u52A0\u6210\u529F",id:"upStatus",duration:2e3}),h(),t("success")}catch{n.loading({content:"\u6DFB\u52A0\u4E2D",id:"upStatus",duration:1})}};return{registerModal:f,getTitle:"\u9009\u62E9\u6570\u636E\u8868\u6DFB\u52A0\u5230\u751F\u6210\u4EE3\u7801\u5217\u8868",handleSubmit:o,loading:F,modelHeight:D,dblist:E,handleSelect:p,selectIds:i,cloneColumns:[{title:"\u8868\u540D\u79F0",dataIndex:"name",filterable:{filter:(u,g)=>g.name.includes(u),slotName:"name-filter",icon:()=>I(w)}},{title:"\u8868\u5907\u6CE8",dataIndex:"title",align:"center"}]}}});const z={class:"table-content"},J={class:"custom-filter"},W={class:"custom-filter-footer"};function q(e,t,D,E,f,h){const i=N,a=K,p=O,F=x,d=T("BasicModal");return M(),H(d,P(e.$attrs,{onRegister:e.registerModal,isPadding:!1,helpMessage:"\u9009\u62E9\u6570\u636E\u5E93\u5DF2\u7ECF\u5EFA\u597D\u7684\u6570\u636E\u8868\u7ED3\u6784\u751F\u6210\u4EE3\u7801\uFF0C\u6846\u67B6\u4E0D\u63D0\u4F9B\u6570\u636E\u8868\u521B\u5EFA\u5DE5\u5177\uFF0C\u8BF7\u4F7F\u7528Navicat\u6570\u636E\u5E93\u7BA1\u7406\u5DE5\u5177\u521B\u5EFA\uFF0C\u8FD9\u5DE5\u5177\u5F88\u597D\u7528\uFF0C\u6BD4\u81EA\u5DF1\u540E\u53F0\u641E\u4E00\u5957\u9AD8\u6548\u591A\u4E86\u3002",loading:e.loading,width:"1000px",minHeight:e.modelHeight,title:e.getTitle,onOk:e.handleSubmit}),{default:s(()=>[m("div",{class:"addFormbox",style:$({"min-height":`${e.modelHeight}px`})},[m("div",z,[l(F,{"row-key":"name",loading:e.loading,pagination:!1,columns:e.cloneColumns,data:e.dblist,"row-selection":{type:"checkbox",showCheckedAll:!0,onlyCurrent:!1},selectedKeys:e.selectIds,"onUpdate:selectedKeys":t[0]||(t[0]=o=>e.selectIds=o),onSelectionChange:e.handleSelect,scroll:{y:557},bordered:{wrapper:!0,cell:!0},"default-expand-all-rows":!0,ref:"artable"},{"name-filter":s(({filterValue:o,setFilterValue:c,handleFilterConfirm:u,handleFilterReset:g})=>[m("div",J,[l(p,{direction:"vertical"},{default:s(()=>[l(i,{"model-value":o[0],onInput:b=>c([b]),onPressEnter:u,placeholder:"\u641C\u7D22\u8868\u540D\u79F0","allow-clear":""},null,8,["model-value","onInput","onPressEnter"]),m("div",W,[l(a,{onClick:u,type:"primary"},{default:s(()=>[...t[1]||(t[1]=[C("\u67E5\u627E",-1)])]),_:1},8,["onClick"]),l(a,{onClick:g},{default:s(()=>[...t[2]||(t[2]=[C("\u91CD\u7F6E",-1)])]),_:1},8,["onClick"])])]),_:2},1024)])]),_:1},8,["loading","columns","data","selectedKeys","onSelectionChange"])])],4)]),_:1},16,["onRegister","loading","minHeight","title","onOk"])}const ae=y(j,[["render",q],["__scopeId","data-v-0042731c"]]);export{ae as default};
