import{B as F,I as E,m as p,i as b,_ as I}from"./index.ec13b3f4.js";/* empty css               */import{d as w,r as u,aP as a,aO as B,aK as S,F as x,aH as A,aT as C,H as h,J as _,aU as y,b3 as O,c8 as v}from"./arco.31164f47.js";import{c as k,u as j}from"./generatecode.58a7c565.js";import{I as M}from"./IconPicker.0c22230d.js";import"./chart.0656511d.js";import"./vue.85c125e1.js";const H=w({name:"AddDb",components:{BasicModal:F,IconPicker:M,Icon:E},emits:["success"],setup(e,{emit:n}){const l=u(500),i=u([]),[r,{closeModal:c}]=p(async t=>{g(!0),g(!1)}),s=u([]),d=u([]),o=t=>{d.value=t},{loading:m,setLoading:g}=b(),D=async()=>{if(d.value.length==0){a.warning({content:"\u8BF7\u9009\u62E9\u751F\u6210\u4EE3\u7801\u7684\u6570\u636E\u8868",id:"checked",duration:2e3});return}try{a.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:0});const t=await k({tablenames:d.value});a.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:1}),t.length>0?B.warning({title:"\u6E29\u99A8\u63D0\u793A",content:`\u60A8\u9009\u62E9\u7684\u201C${t.join(",")}\u201D\u6570\u636E\u8868\u5DF2\u7ECF\u5728\u751F\u6210\u5217\u8868\u4E2D\uFF0C\u60A8\u9700\u8981\u91CD\u65B0\u6DFB\u52A0\u5417\uFF1F`,okText:"\u786E\u5B9A",hideCancel:!1,titleAlign:"start",cancelText:"\u53D6\u6D88",onOk:async()=>{f()}}):f()}catch{a.loading({content:"\u68C0\u67E5\u4E2D...",id:"checked",duration:1})}},f=async()=>{try{s.value=[],a.loading({content:"\u6DFB\u52A0\u4E2D",id:"upStatus",duration:0}),await j({tablenames:d.value}),a.success({content:"\u6DFB\u52A0\u6210\u529F",id:"upStatus",duration:2e3}),c(),n("success")}catch{a.loading({content:"\u6DFB\u52A0\u4E2D",id:"upStatus",duration:1})}};return{registerModal:r,getTitle:"\u9009\u62E9\u6570\u636E\u8868\u6DFB\u52A0\u5230\u751F\u6210\u4EE3\u7801\u5217\u8868",handleSubmit:D,loading:m,modelHeight:l,dblist:i,handleSelect:o,selectIds:s,cloneColumns:[{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_date",align:"left",width:180,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u4EA4\u6613\u5BF9",dataIndex:"contract_code",align:"left",sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6765\u6E90",dataIndex:"adjustment_type",align:"left"},{title:"\u8BA1\u5212\u7C7B\u578B",dataIndex:"adjustment_type2",align:"left",width:190,render:({record:t})=>t.adjustment_type2??"-"},{title:"\u7528\u6237ID",dataIndex:"cidName",align:"left",width:100,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u8BA2\u5355\u65B9\u5411",dataIndex:"direction",slotName:"direction",align:"left",width:130,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u5F00\u5E73\u65B9\u5411",dataIndex:"direction1",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u59D4\u6258\u4EF7\u683C",dataIndex:"wtjg",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6210\u4EA4\u5747\u4EF7",dataIndex:"dealamount",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6210\u4EA4\u4EF7\u503C",dataIndex:"deal",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6536\u76CA",dataIndex:"hedge_switch",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u624B\u7EED\u8D39",dataIndex:"amt",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u59D4\u6258\u6570\u91CF(\u5F20)",dataIndex:"wtsl",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6210\u4EA4\u6570\u91CF(\u5F20)",dataIndex:"cjsl",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6760\u6746",dataIndex:"lever",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u4E0B\u5355\u540E\u4F59\u989D",dataIndex:"xdhye",align:"left",width:190},{title:"\u59D4\u6258\u72B6\u6001",dataIndex:"wtzt",align:"left",width:190},{title:"\u8BA2\u5355ID",dataIndex:"ddid",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6700\u540E\u66F4\u65B0\u65F6\u95F4",dataIndex:"zhgxsj",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}},{title:"\u6210\u4EA4\u65F6\u95F4",dataIndex:"cjsj",align:"left",width:190,sortable:{sortDirections:["ascend","descend"],defaultSortOrder:"ascend"}}]}}});const T={class:"table-content"};function $(e,n,l,i,r,c){const s=v,d=S("BasicModal");return x(),A(d,O(e.$attrs,{onRegister:e.registerModal,isPadding:!1,loading:e.loading,width:"1000px",minHeight:e.modelHeight,title:"\u5173\u8054\u8BA2\u5355"}),{default:C(()=>[h("div",{class:"addFormbox",style:_({"min-height":`${e.modelHeight}px`})},[h("div",T,[y(s,{"row-key":"name",loading:e.loading,pagination:!1,columns:e.cloneColumns,data:e.dblist,selectedKeys:e.selectIds,"onUpdate:selectedKeys":n[0]||(n[0]=o=>e.selectIds=o),onSelectionChange:e.handleSelect,scroll:{x:"100%",y:"100%"},"default-expand-all-rows":!0,ref:"artable",style:{height:"100%"}},null,8,["loading","columns","data","selectedKeys","onSelectionChange"])])],4)]),_:1},16,["onRegister","loading","minHeight"])}const V=I(H,[["render",$],["__scopeId","data-v-a86d8f1c"]]);export{V as default};
